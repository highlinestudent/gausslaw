{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/js/ui/menu/MenuHandler.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/components/src/core/lib/util/Options.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/components/src/core/lib/components/global.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/js/ui/menu/MJContextMenu.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/js/ui/menu/Menu.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/js/ui/menu/MmlVisitor.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/js/ui/menu/SelectableInfo.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/components/src/core/lib/mathjax.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/components/src/core/lib/core/MathItem.js","webpack:///./context-menu.js","webpack:///(webpack)/buildin/global.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/node_modules/mj-context-menu/dist/context_menu.js","webpack:////Users/mac/Downloads/Highline/Physics202/projects/gausslaw2d/js/mathjax/components/src/core/lib/core/MmlTree/SerializedMmlVisitor.js","webpack:///./lib/menu.js","webpack:///./menu.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","extendStatics","__extends","this","b","setPrototypeOf","__proto__","Array","__","constructor","__assign","assign","arguments","length","apply","__read","iterator","e","ar","next","done","push","error","__spread","concat","__values","TypeError","mathjax_js_1","MathItem_js_1","Options_js_1","Menu_js_1","MenuMathItemMixin","BaseMathItem","class_1","_super","addMenu","document","state","STATE","CONTEXT_MENU","isEscaped","menu","checkLoading","isLoading","mathjax","retryAfter","loadingPromise","catch","err","console","log","enrich","force","settings","collapsible","explorer","checkComponent","complexity","explorable","assistiveMml","MenuMathDocumentMixin","BaseDocument","_a","class_2","e_1","processed","isSet","_b","math","_c","e_1_1","return","set","restore","clear","updateDocument","getStore","sort","e_2","e_2_1","e_3","e_3_1","e_4","e_4_1","OPTIONS","MenuClass","Menu","menuOptions","a11y","expandable","renderActions","UNPROCESSED","args","_i","_this","options","ProcessBits","has","allocate","MathItem","newState","MenuHandler","handler","documentClass","APPEND","MathJax","_","util","Options","REMOVE","Expandable","makeArray","keys","copy","insert","defaultOptions","userOptions","selectOptions","selectOptionsFromKeys","separateOptions","isObject","components","global","combineConfig","combineDefaults","combineWithMathJax","MJContextMenu","ContextMenu","post","x","y","mathItem","undefined","input","inputJax","original","findID","content","semantics","disable","enable","getAnnotationMenu","dynamicSubmenus","unpost","names","item","names_1","names_1_1","name_1","find","Submenu","getSubmenu","annotations","getAnnotations","getSemanticNode","createAnnotationMenu","showAnnotation","copyAnnotation","node","root","isKind","isToken","childNodes","child","match","annotationMatch","reduce","text","chars","toString","encoding","attributes","annotationTypes","type","indexOf","id","action","setSubmenu","SubMenu","parse","items","map","annotation","DynamicSubmenus","_d","method","sub","getItems","Map","global_js_1","MJContextMenu_js_1","MmlVisitor_js_1","SelectableInfo_js_1","isMac","window","navigator","platform","substr","loading","configurable","_loadingPromise","Promise","ok","failed","_loadingOK","_loadingFailed","resolve","initSettings","jax","outputJax","renderer","scale","defaultSettings","initMenu","pool","variable","setRenderer","setScale","explore","setExplorer","a11yVar","collapse","setCollapsible","tab","setTabOrder","mml","setAssistiveMml","submenu","command","mathmlCode","originalText","copyMathML","copyOriginal","rule","radioGroup","zoom","label","checkbox","hidden","hiddne","scaleAllMath","resetDefaults","disabled","about","help","attachMenu","annotationText","zoomBox","checkLoadableItems","enableExplorerItems","CssStyles","addInfoStyles","addMenuStyles","loader","startup","loadA11y","getMenu","slice","Rule","mergeUserSettings","localStorage","getItem","MENU_STORAGE","JSON","setA11y","message","saveUserSettings","name_2","setItem","stringify","removeItem","explorer_ts","setA11yOptions","getA11y","parseFloat","rerender","setOutputJax","name_3","toLowerCase","loadComponent","constructors","useOutput","output","getOutputJax","setAdaptor","adaptor","inTaborder","RERENDER","COMPILED","toFixed","replace","percent","prompt","scale_1","String","alert","getPool","name_4","lookup","setValue","executeCallbacks_","promise","loadingPromises","callback","load","then","delete","component","noEnrich","ENRICHED","handlers","unregister","getHandler","register","getDocument","transferMathList","TYPESET","e_5","e_5_1","formatSource","trim","toMML","MmlVisitor","visitTree","texHints","event","isZoomEvent","alt","altKey","ctrl","ctrlKey","cmd","metaKey","shift","shiftKey","start","rerenderStart","Math","min","LAST","copyToClipboard","createElement","setAttribute","style","cssText","body","appendChild","select","execCommand","removeChild","element","typesetRoot","addEventListener","setter","entries","e_6","entries_1","entries_1_1","entry","isArray","e_6_1","other","radios","def","radio","zscale","autocollapse","inTabOrder","CHTML","SVG","TeX","StarMath","Maple","ContentMathML","OpenMath","Info","version","lines","join","kind","SelectableInfo","cloneNode","margin","outerHTML","SerializedMmlVisitor_js_1","SerializedMmlVisitor","visitNode","visitTeXAtomNode","space","getAttributes","childNodeMml","visitMathNode","visitDefault","addRow","addEvents","selectAll","stop","getSelection","selectAllChildren","getHtml","querySelector","removeAllRanges","generateHtml","button","HtmlClasses","protoItem","core","AbstractMathItem","g","Function","Variable","VariablePool","KEY","AbstractNavigatable","PREFIX","MenuElement","AbstractEntry","AbstractPostable","AbstractMenu","MenuStore","ContextMenu_1","AbstractItem","AbstractVariableItem","CloseButton","Checkbox","Combo","Command","Label","Radio","Popup","bubble","prefix_","prefixClass_","prefixAttr_","className","role","posted","store","active","counter","attachedClass","MenuUtil","taborder","attrMap","moving","store_","widgets","variablePool","anchor","setBaseMenu","_content","callbacks","title","signature","contentDiv","generateContent","close","generateClose","inputEvent","localSettings","left","round","screen","width","top","height","windowList","mobileFlag","getName","getValue","update","index","splice","forEach","registerCallback","func","unregisterCallback","remove","MOUSE","CLICK","DBLCLICK","DOWN","UP","OVER","OUT","MOVE","SELECTSTART","SELECTEND","bubbleKey","keydown","keyCode","ESCAPE","escape","RIGHT","right","LEFT","up","down","RETURN","SPACE","stopPropagation","preventDefault","cancelBubble","mousedown","mouseup","mouseover","mouseout","click","ATTACHED","CONTEXTMENU","MENU","MENUARROW","MENUACTIVE","MENUCHECK","MENUCLOSE","MENUCOMBOBOX","MENUDISABLED","MENUFRAME","MENUITEM","MENULABEL","MENURADIOCHECK","MENUINPUTBOX","MENURULE","MOUSEPOST","RTL","INFO","INFOCLOSE","INFOCONTENT","INFOSIGNATURE","INFOTITLE","HtmlAttrs","COUNTER","KEYDOWNFUNC","CONTEXTMENUFUNC","OLDTAB","TOUCHFUNC","addAttributes","attr","html","setHtml","classList","add","focus","unfocus","hasAttribute","blur","setMenu","getType","hide","generateMenu","show","isHidden","isPosted","display","parentNode","getFocused","focused","setFocused","old","filter","itemHtml","unpostSubmenus","submenus_1","getId","result","parseItems","parseItem","menuItem","setActive","getActive","previous","last","elementOrList","elements_1","HTMLElement","insertElement","elements_2","removeElement","flag","removeTaborder","insertTaborder","insertTaborder_","removeTaborder_","contains","addTabindex","removeTabindex","removeEvents","nodes","getElementsByClassName","getAttribute","removeAttribute","addEvent","attrName","toUpperCase","removeEvent","menuFunc","removeEventListener","stopImmediatePropagation","ctxtMenu","parseVariable","frame","styleString","innerDiv","unpostWidgets","move_","getFrame","numberOrEvent","isY","Event","target","MouseEvent","pageX","pageY","clientX","scrollLeft","documentElement","clientY","scrollTop","offsetX","pageXOffset","offsetY","pageYOffset","rect","getBoundingClientRect","bottom","offsetWidth","registerWidget","widget","unregisterWidget","getAnchor","parent","base","baseMenu","mw","offsetLeft","offsetTop","max","getActiveElement","msg","count","press","executeAction","deactivate","textContent","activate","span","generateSpan","updateAria","updateSpan","makeClass_","INFO_STYLES","MENU_STYLES","CLOSE_ICON_STYLES","INFO_ADDED","MENU_ADDED","CLOSE_ICON_ADDED","addCloseIconStyles_","opt_document","addStyles_","styles","doc","inner","innerHTML","head","generateTitle","generateSignature","H","innerHeight","clientHeight","scrollHeight","floor","offsetHeight","div","inputKey","initValue","setting","popupSettings","open","write","setTimeout","resize","table","firstChild","outerHeight","W","outerWidth","innerWidth","resizeTo","bb","moveTo","status","toolbar","locationbar","menubar","directories","personalbar","resizable","scrollbars","TOUCH","START","END","CANCEL","DATAMJX","MmlTree","ui","module1","module2","module3","module4","module5","extendHandler"],"mappings":"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","file":"menu.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mathjax_js_1 = require(\"../../mathjax.js\");\nvar MathItem_js_1 = require(\"../../core/MathItem.js\");\nvar Options_js_1 = require(\"../../util/Options.js\");\nvar Menu_js_1 = require(\"./Menu.js\");\nMathItem_js_1.newState('CONTEXT_MENU', 170);\nfunction MenuMathItemMixin(BaseMathItem) {\n    return (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.addMenu = function (document) {\n            if (this.state() < MathItem_js_1.STATE.CONTEXT_MENU && !this.isEscaped) {\n                document.menu.addMenu(this);\n                this.state(MathItem_js_1.STATE.CONTEXT_MENU);\n            }\n        };\n        class_1.prototype.checkLoading = function (document) {\n            if (document.menu.isLoading) {\n                mathjax_js_1.mathjax.retryAfter(document.menu.loadingPromise.catch(function (err) { return console.log(err); }));\n            }\n        };\n        class_1.prototype.enrich = function (document, force) {\n            if (force === void 0) { force = false; }\n            var settings = document.menu.settings;\n            if (settings.collapsible || settings.explorer || force) {\n                settings.collapsible && document.menu.checkComponent('a11y/complexity');\n                settings.explorer && document.menu.checkComponent('a11y/explorer');\n                _super.prototype.enrich.call(this, document);\n            }\n        };\n        class_1.prototype.complexity = function (document, force) {\n            if (force === void 0) { force = false; }\n            if (document.menu.settings.collapsible || force) {\n                document.menu.checkComponent('a11y/complexity');\n                _super.prototype.complexity.call(this, document);\n            }\n        };\n        class_1.prototype.explorable = function (document, force) {\n            if (force === void 0) { force = false; }\n            if (document.menu.settings.explorer || force) {\n                document.menu.checkComponent('a11y/explorer');\n                _super.prototype.explorable.call(this, document);\n            }\n        };\n        class_1.prototype.assistiveMml = function (document, force) {\n            if (force === void 0) { force = false; }\n            if (document.menu.settings.assistiveMml || force) {\n                document.menu.checkComponent('a11y/assistive-mml');\n                _super.prototype.assistiveMml.call(this, document);\n            }\n        };\n        return class_1;\n    }(BaseMathItem));\n}\nexports.MenuMathItemMixin = MenuMathItemMixin;\nfunction MenuMathDocumentMixin(BaseDocument) {\n    var _a;\n    return _a = (function (_super) {\n            __extends(class_2, _super);\n            function class_2() {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                var _this = _super.apply(this, __spread(args)) || this;\n                _this.menu = new _this.options.MenuClass(_this, _this.options.menuOptions);\n                var ProcessBits = _this.constructor.ProcessBits;\n                if (!ProcessBits.has('context-menu')) {\n                    ProcessBits.allocate('context-menu');\n                }\n                _this.options.MathItem = MenuMathItemMixin(_this.options.MathItem);\n                return _this;\n            }\n            class_2.prototype.addMenu = function () {\n                var e_1, _a;\n                if (!this.processed.isSet('context-menu')) {\n                    try {\n                        for (var _b = __values(this.math), _c = _b.next(); !_c.done; _c = _b.next()) {\n                            var math = _c.value;\n                            math.addMenu(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    this.processed.set('context-menu');\n                }\n                return this;\n            };\n            class_2.prototype.checkLoading = function () {\n                if (this.menu.isLoading) {\n                    mathjax_js_1.mathjax.retryAfter(this.menu.loadingPromise.catch(function (err) { return console.log(err); }));\n                }\n                return this;\n            };\n            class_2.prototype.state = function (state, restore) {\n                if (restore === void 0) { restore = false; }\n                _super.prototype.state.call(this, state, restore);\n                if (state < MathItem_js_1.STATE.CONTEXT_MENU) {\n                    this.processed.clear('context-menu');\n                }\n                return this;\n            };\n            class_2.prototype.updateDocument = function () {\n                _super.prototype.updateDocument.call(this);\n                this.menu.menu.getStore().sort();\n                return this;\n            };\n            class_2.prototype.enrich = function (force) {\n                var e_2, _a;\n                if (force === void 0) { force = false; }\n                var settings = this.menu.settings;\n                if (!this.processed.isSet('enriched') && (settings.collapsible || settings.explorer || force)) {\n                    settings.collapsible && this.menu.checkComponent('a11y/complexity');\n                    settings.explorer && this.menu.checkComponent('a11y/explorer');\n                    try {\n                        for (var _b = __values(this.math), _c = _b.next(); !_c.done; _c = _b.next()) {\n                            var math = _c.value;\n                            math.enrich(this, force);\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                    this.processed.set('enriched');\n                }\n                return this;\n            };\n            class_2.prototype.complexity = function (force) {\n                var e_3, _a;\n                if (force === void 0) { force = false; }\n                if (!this.processed.isSet('complexity') && (this.menu.settings.collapsible || force)) {\n                    this.menu.checkComponent('a11y/complexity');\n                    try {\n                        for (var _b = __values(this.math), _c = _b.next(); !_c.done; _c = _b.next()) {\n                            var math = _c.value;\n                            math.complexity(this, force);\n                        }\n                    }\n                    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                        }\n                        finally { if (e_3) throw e_3.error; }\n                    }\n                    this.processed.set('complexity');\n                }\n                return this;\n            };\n            class_2.prototype.explorable = function (force) {\n                var e_4, _a;\n                if (force === void 0) { force = false; }\n                if (!this.processed.isSet('explorer') && (this.menu.settings.explorer || force)) {\n                    this.menu.checkComponent('a11y/explorer');\n                    try {\n                        for (var _b = __values(this.math), _c = _b.next(); !_c.done; _c = _b.next()) {\n                            var math = _c.value;\n                            math.explorable(this, force);\n                        }\n                    }\n                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                        }\n                        finally { if (e_4) throw e_4.error; }\n                    }\n                    this.processed.set('explorer');\n                }\n                return this;\n            };\n            return class_2;\n        }(BaseDocument)),\n        _a.OPTIONS = __assign(__assign({}, BaseDocument.OPTIONS), { MenuClass: Menu_js_1.Menu, menuOptions: Menu_js_1.Menu.OPTIONS, a11y: (BaseDocument.OPTIONS.a11y || Options_js_1.expandable({})), renderActions: Options_js_1.expandable(__assign(__assign({}, BaseDocument.OPTIONS.renderActions), { addMenu: [MathItem_js_1.STATE.CONTEXT_MENU], checkLoading: [MathItem_js_1.STATE.UNPROCESSED + 1] })) }),\n        _a;\n}\nexports.MenuMathDocumentMixin = MenuMathDocumentMixin;\nfunction MenuHandler(handler) {\n    handler.documentClass = MenuMathDocumentMixin(handler.documentClass);\n    return handler;\n}\nexports.MenuHandler = MenuHandler;\n//# sourceMappingURL=MenuHandler.js.map","\"use strict\";\nObject.defineProperty(exports, '__esModule', {value: true});\nexports.APPEND = MathJax._.util.Options.APPEND;\nexports.REMOVE = MathJax._.util.Options.REMOVE;\nexports.Expandable = MathJax._.util.Options.Expandable;\nexports.expandable = MathJax._.util.Options.expandable;\nexports.makeArray = MathJax._.util.Options.makeArray;\nexports.keys = MathJax._.util.Options.keys;\nexports.copy = MathJax._.util.Options.copy;\nexports.insert = MathJax._.util.Options.insert;\nexports.defaultOptions = MathJax._.util.Options.defaultOptions;\nexports.userOptions = MathJax._.util.Options.userOptions;\nexports.selectOptions = MathJax._.util.Options.selectOptions;\nexports.selectOptionsFromKeys = MathJax._.util.Options.selectOptionsFromKeys;\nexports.separateOptions = MathJax._.util.Options.separateOptions;\n","\"use strict\";\nObject.defineProperty(exports, '__esModule', {value: true});\nexports.isObject = MathJax._.components.global.isObject;\nexports.combineConfig = MathJax._.components.global.combineConfig;\nexports.combineDefaults = MathJax._.components.global.combineDefaults;\nexports.combineWithMathJax = MathJax._.components.global.combineWithMathJax;\nexports.MathJax = MathJax._.components.global.MathJax;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MJContextMenu = (function (_super) {\n    __extends(MJContextMenu, _super);\n    function MJContextMenu() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mathItem = null;\n        _this.annotation = '';\n        _this.annotationTypes = {};\n        return _this;\n    }\n    MJContextMenu.prototype.post = function (x, y) {\n        if (this.mathItem) {\n            if (y !== undefined) {\n                var input = this.mathItem.inputJax.name;\n                var original = this.findID('Show', 'Original');\n                original.content = (input === 'MathML' ? 'Original MathML' : input + ' Commands');\n                var clipboard = this.findID('Copy', 'Original');\n                clipboard.content = original.content;\n                var semantics = this.findID('Settings', 'semantics');\n                input === 'MathML' ? semantics.disable() : semantics.enable();\n                this.getAnnotationMenu();\n                this.dynamicSubmenus();\n            }\n            _super.prototype.post.call(this, x, y);\n        }\n    };\n    MJContextMenu.prototype.unpost = function () {\n        _super.prototype.unpost.call(this);\n        this.mathItem = null;\n    };\n    MJContextMenu.prototype.findID = function () {\n        var e_1, _a;\n        var names = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            names[_i] = arguments[_i];\n        }\n        var menu = this;\n        var item = null;\n        try {\n            for (var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {\n                var name_1 = names_1_1.value;\n                if (menu) {\n                    item = menu.find(name_1);\n                    menu = (item instanceof ContextMenu.Submenu ? item.getSubmenu() : null);\n                }\n                else {\n                    item = null;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return item;\n    };\n    MJContextMenu.prototype.getAnnotationMenu = function () {\n        var _this = this;\n        var annotations = this.getAnnotations(this.getSemanticNode());\n        this.createAnnotationMenu('Show', annotations, function () { return _this.showAnnotation.post(); });\n        this.createAnnotationMenu('Copy', annotations, function () { return _this.copyAnnotation(); });\n    };\n    MJContextMenu.prototype.getSemanticNode = function () {\n        var node = this.mathItem.root;\n        while (node && !node.isKind('semantics')) {\n            if (node.isToken || node.childNodes.length !== 1)\n                return;\n            node = node.childNodes[0];\n        }\n        return node;\n    };\n    MJContextMenu.prototype.getAnnotations = function (node) {\n        var e_2, _a;\n        var annotations = [];\n        if (!node)\n            return annotations;\n        try {\n            for (var _b = __values(node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var child = _c.value;\n                if (child.isKind('annotation')) {\n                    var match = this.annotationMatch(child);\n                    if (match) {\n                        var value = child.childNodes.reduce(function (text, chars) { return text + chars.toString(); }, '');\n                        annotations.push([match, value]);\n                    }\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return annotations;\n    };\n    MJContextMenu.prototype.annotationMatch = function (child) {\n        var e_3, _a;\n        var encoding = child.attributes.get('encoding');\n        try {\n            for (var _b = __values(Object.keys(this.annotationTypes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var type = _c.value;\n                if (this.annotationTypes[type].indexOf(encoding) >= 0) {\n                    return type;\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return null;\n    };\n    MJContextMenu.prototype.createAnnotationMenu = function (id, annotations, action) {\n        var _this = this;\n        var menu = this.findID(id, 'Annotation');\n        menu.setSubmenu(ContextMenu.SubMenu.parse({\n            items: annotations.map(function (_a) {\n                var _b = __read(_a, 2), type = _b[0], value = _b[1];\n                return {\n                    type: 'command',\n                    id: type,\n                    content: type,\n                    action: function () {\n                        _this.annotation = value;\n                        action();\n                    }\n                };\n            }),\n            id: 'annotations'\n        }, menu));\n        if (annotations.length) {\n            menu.enable();\n        }\n        else {\n            menu.disable();\n        }\n    };\n    MJContextMenu.prototype.dynamicSubmenus = function () {\n        var e_4, _a;\n        try {\n            for (var _b = __values(MJContextMenu.DynamicSubmenus), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), id = _d[0], method = _d[1];\n                var menu = this.find(id);\n                if (!menu)\n                    continue;\n                var sub = method(this, menu);\n                menu.setSubmenu(sub);\n                if (sub.getItems().length) {\n                    menu.enable();\n                }\n                else {\n                    menu.disable();\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n    };\n    MJContextMenu.DynamicSubmenus = new Map();\n    return MJContextMenu;\n}(ContextMenu.ContextMenu));\nexports.MJContextMenu = MJContextMenu;\n//# sourceMappingURL=MJContextMenu.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mathjax_js_1 = require(\"../../mathjax.js\");\nvar MathItem_js_1 = require(\"../../core/MathItem.js\");\nvar global_js_1 = require(\"../../components/global.js\");\nvar Options_js_1 = require(\"../../util/Options.js\");\nvar MJContextMenu_js_1 = require(\"./MJContextMenu.js\");\nvar MmlVisitor_js_1 = require(\"./MmlVisitor.js\");\nvar SelectableInfo_js_1 = require(\"./SelectableInfo.js\");\nvar MathJax = global_js_1.MathJax;\nvar isMac = (typeof window !== 'undefined' &&\n    window.navigator && window.navigator.platform.substr(0, 3) === 'Mac');\nvar Menu = (function () {\n    function Menu(document, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        this.settings = null;\n        this.defaultSettings = null;\n        this.menu = null;\n        this.MmlVisitor = new MmlVisitor_js_1.MmlVisitor();\n        this.jax = {\n            CHTML: null,\n            SVG: null\n        };\n        this.rerenderStart = MathItem_js_1.STATE.LAST;\n        this.about = new ContextMenu.Info('<b style=\"font-size:120%;\">MathJax</b> v' + mathjax_js_1.mathjax.version, function () {\n            var lines = [];\n            lines.push('Input Jax: ' + _this.document.inputJax.map(function (jax) { return jax.name; }).join(', '));\n            lines.push('Output Jax: ' + _this.document.outputJax.name);\n            lines.push('Document Type: ' + _this.document.kind);\n            return lines.join('<br/>');\n        }, '<a href=\"https://www.mathjax.org\">www.mathjax.org</a>');\n        this.help = new ContextMenu.Info('<b>MathJax Help</b>', function () {\n            return [\n                '<p><b>MathJax</b> is a JavaScript library that allows page',\n                ' authors to include mathematics within their web pages.',\n                ' As a reader, you don\\'t need to do anything to make that happen.</p>',\n                '<p><b>Browsers</b>: MathJax works with all modern browsers including',\n                ' Edge, Firefox, Chrome, Safari, Opera, and most mobile browsers.</p>',\n                '<p><b>Math Menu</b>: MathJax adds a contextual menu to equations.',\n                ' Right-click or CTRL-click on any mathematics to access the menu.</p>',\n                '<div style=\"margin-left: 1em;\">',\n                '<p><b>Show Math As:</b> These options allow you to view the formula\\'s',\n                ' source markup (as MathML or in its original format).</p>',\n                '<p><b>Copy to Clipboard:</b> These options copy the formula\\'s source markup,',\n                ' as MathML or in its original format, to the clipboard',\n                ' (in browsers that support that).</p>',\n                '<p><b>Math Settings:</b> These give you control over features of MathJax,',\n                ' such the size of the mathematics, and the mechanism used',\n                ' to display equations.</p>',\n                '<p><b>Accessibility</b>: MathJax can work with screen',\n                ' readers to make mathematics accessible to the visually impaired.',\n                ' Turn on the explorer to enable generation of speech strings',\n                ' and the ability to investigate expressions interactively.</p>',\n                '<p><b>Language</b>: This menu lets you select the language used by MathJax',\n                ' for its menus and warning messages. (Not yet implemented in version 3.)</p>',\n                '</div>',\n                '<p><b>Math Zoom</b>: If you are having difficulty reading an',\n                ' equation, MathJax can enlarge it to help you see it better, or',\n                ' you can scall all the math on the page to make it larger.',\n                ' Turn these features on in the <b>Math Settings</b> menu.</p>',\n                '<p><b>Preferences</b>: MathJax uses your browser\\'s localStorage database',\n                ' to save the preferences set via this menu locally in your browser.  These',\n                ' are not used to track you, and are not transferred or used remotely by',\n                ' MathJax in any way.</p>'\n            ].join('\\n');\n        }, '<a href=\"https://www.mathjax.org\">www.mathjax.org</a>');\n        this.mathmlCode = new SelectableInfo_js_1.SelectableInfo('MathJax MathML Expression', function () {\n            if (!_this.menu.mathItem)\n                return '';\n            var text = _this.toMML(_this.menu.mathItem);\n            return '<pre>' + _this.formatSource(text) + '</pre>';\n        }, '');\n        this.originalText = new SelectableInfo_js_1.SelectableInfo('MathJax Original Source', function () {\n            if (!_this.menu.mathItem)\n                return '';\n            var text = _this.menu.mathItem.math;\n            return '<pre style=\"font-size:125%; margin:0\">' + _this.formatSource(text) + '</pre>';\n        }, '');\n        this.annotationText = new SelectableInfo_js_1.SelectableInfo('MathJax Annotation Text', function () {\n            if (!_this.menu.mathItem)\n                return '';\n            var text = _this.menu.annotation;\n            return '<pre style=\"font-size:125%; margin:0\">' + _this.formatSource(text) + '</pre>';\n        }, '');\n        this.zoomBox = new ContextMenu.Info('MathJax Zoomed Expression', function () {\n            if (!_this.menu.mathItem)\n                return '';\n            var element = _this.menu.mathItem.typesetRoot.cloneNode(true);\n            element.style.margin = '0';\n            var scale = 1.25 * parseFloat(_this.settings.zscale);\n            return '<div style=\"font-size: ' + scale + '%\">' + element.outerHTML + '</div>';\n        }, '');\n        this.document = document;\n        this.options = Options_js_1.userOptions(Options_js_1.defaultOptions({}, this.constructor.OPTIONS), options);\n        this.initSettings();\n        this.mergeUserSettings();\n        this.initMenu();\n    }\n    Object.defineProperty(Menu.prototype, \"isLoading\", {\n        get: function () {\n            return Menu.loading > 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Menu.prototype, \"loadingPromise\", {\n        get: function () {\n            if (!this.isLoading) {\n                return Promise.resolve();\n            }\n            if (!Menu._loadingPromise) {\n                Menu._loadingPromise = new Promise(function (ok, failed) {\n                    Menu._loadingOK = ok;\n                    Menu._loadingFailed = failed;\n                });\n            }\n            return Menu._loadingPromise;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Menu.prototype.initSettings = function () {\n        this.settings = this.options.settings;\n        this.jax = this.options.jax;\n        var jax = this.document.outputJax;\n        this.jax[jax.name] = jax;\n        this.settings.renderer = jax.name;\n        if (MathJax._.a11y && MathJax._.a11y.explorer) {\n            Object.assign(this.settings, this.document.options.a11y);\n        }\n        this.settings.scale = jax.options.scale;\n        this.defaultSettings = Object.assign({}, this.settings);\n    };\n    Menu.prototype.initMenu = function () {\n        var _this = this;\n        this.menu = MJContextMenu_js_1.MJContextMenu.parse({\n            menu: {\n                id: 'MathJax_Menu',\n                pool: [\n                    this.variable('texHints'),\n                    this.variable('semantics'),\n                    this.variable('zoom'),\n                    this.variable('zscale'),\n                    this.variable('renderer', function (jax) { return _this.setRenderer(jax); }),\n                    this.variable('alt'),\n                    this.variable('cmd'),\n                    this.variable('ctrl'),\n                    this.variable('shift'),\n                    this.variable('scale', function (scale) { return _this.setScale(scale); }),\n                    this.variable('explorer', function (explore) { return _this.setExplorer(explore); }),\n                    this.a11yVar('highlight'),\n                    this.a11yVar('backgroundColor'),\n                    this.a11yVar('foregroundColor'),\n                    this.a11yVar('speech'),\n                    this.a11yVar('subtitles'),\n                    this.a11yVar('braille'),\n                    this.a11yVar('viewBraille'),\n                    this.a11yVar('speechRules'),\n                    this.a11yVar('magnification'),\n                    this.a11yVar('magnify'),\n                    this.a11yVar('treeColoring'),\n                    this.a11yVar('infoType'),\n                    this.a11yVar('infoRole'),\n                    this.a11yVar('infoPrefix'),\n                    this.variable('autocollapse'),\n                    this.variable('collapsible', function (collapse) { return _this.setCollapsible(collapse); }),\n                    this.variable('inTabOrder', function (tab) { return _this.setTabOrder(tab); }),\n                    this.variable('assistiveMml', function (mml) { return _this.setAssistiveMml(mml); })\n                ],\n                items: [\n                    this.submenu('Show', 'Show Math As', [\n                        this.command('MathMLcode', 'MathML Code', function () { return _this.mathmlCode.post(); }),\n                        this.command('Original', 'Original Form', function () { return _this.originalText.post(); }),\n                        this.submenu('Annotation', 'Annotation')\n                    ]),\n                    this.submenu('Copy', 'Copy to Clipboard', [\n                        this.command('MathMLcode', 'MathML Code', function () { return _this.copyMathML(); }),\n                        this.command('Original', 'Original Form', function () { return _this.copyOriginal(); }),\n                        this.submenu('Annotation', 'Annotation')\n                    ]),\n                    this.rule(),\n                    this.submenu('Settings', 'Math Settings', [\n                        this.submenu('Renderer', 'Math Renderer', this.radioGroup('renderer', [['CHTML'], ['SVG']])),\n                        this.rule(),\n                        this.submenu('ZoomTrigger', 'Zoom Trigger', [\n                            this.command('ZoomNow', 'Zoom Once Now', function () { return _this.zoom(null, '', _this.menu.mathItem); }),\n                            this.rule(),\n                            this.radioGroup('zoom', [\n                                ['Click'], ['DoubleClick', 'Double-Click'], ['NoZoom', 'No Zoom']\n                            ]),\n                            this.rule(),\n                            this.label('TriggerRequires', 'Trigger Requires:'),\n                            this.checkbox((isMac ? 'Option' : 'Alt'), (isMac ? 'Option' : 'Alt'), 'alt'),\n                            this.checkbox('Command', 'Command', 'cmd', { hidden: !isMac }),\n                            this.checkbox('Control', 'Control', 'ctrl', { hiddne: isMac }),\n                            this.checkbox('Shift', 'Shift', 'shift')\n                        ]),\n                        this.submenu('ZoomFactor', 'Zoom Factor', this.radioGroup('zscale', [\n                            ['150%'], ['175%'], ['200%'], ['250%'], ['300%'], ['400%']\n                        ])),\n                        this.rule(),\n                        this.command('Scale', 'Scale All Math...', function () { return _this.scaleAllMath(); }),\n                        this.rule(),\n                        this.checkbox('texHints', 'Add TeX hints to MathML', 'texHints'),\n                        this.checkbox('semantics', 'Add original as annotation', 'semantics'),\n                        this.rule(),\n                        this.command('Reset', 'Reset to defaults', function () { return _this.resetDefaults(); })\n                    ]),\n                    this.submenu('Accessibility', 'Accessibility', [\n                        this.checkbox('Activate', 'Activate', 'explorer'),\n                        this.submenu('Speech', 'Speech', [\n                            this.checkbox('Speech', 'Speech Output', 'speech'),\n                            this.checkbox('Subtitles', 'Speech Subtities', 'subtitles'),\n                            this.checkbox('Braille', 'Braille Output', 'braille'),\n                            this.checkbox('View Braille', 'Braille Subtitles', 'viewBraille'),\n                            this.rule(),\n                            this.submenu('Mathspeak', 'Mathspeak Rules', this.radioGroup('speechRules', [\n                                ['mathspeak-default', 'Verbose'],\n                                ['mathspeak-brief', 'Brief'],\n                                ['mathspeak-sbrief', 'Superbrief']\n                            ])),\n                            this.submenu('Clearspeak', 'Clearspeak Rules', this.radioGroup('speechRules', [\n                                ['clearspeak-default', 'Auto']\n                            ])),\n                            this.submenu('ChromeVox', 'ChromeVox Rules', this.radioGroup('speechRules', [\n                                ['default-default', 'Standard'],\n                                ['default-alternative', 'Alternative']\n                            ]))\n                        ]),\n                        this.submenu('Highlight', 'Highlight', [\n                            this.submenu('Background', 'Background', this.radioGroup('backgroundColor', [\n                                ['Blue'], ['Red'], ['Green'], ['Yellow'], ['Cyan'], ['Magenta'], ['White'], ['Black']\n                            ])),\n                            this.submenu('Foreground', 'Foreground', this.radioGroup('foregroundColor', [\n                                ['Black'], ['White'], ['Magenta'], ['Cyan'], ['Yellow'], ['Green'], ['Red'], ['Blue']\n                            ])),\n                            this.rule(),\n                            this.radioGroup('highlight', [\n                                ['None'], ['Hover'], ['Flame']\n                            ]),\n                            this.rule(),\n                            this.checkbox('TreeColoring', 'Tree Coloring', 'treeColoring')\n                        ]),\n                        this.submenu('Magnification', 'Magnification', [\n                            this.radioGroup('magnification', [\n                                ['None'], ['Keyboard'], ['Mouse']\n                            ]),\n                            this.rule(),\n                            this.radioGroup('magnify', [\n                                ['200%'], ['300%'], ['400%'], ['500%']\n                            ])\n                        ]),\n                        this.submenu('Semantic Info', 'Semantic Info', [\n                            this.checkbox('Type', 'Type', 'infoType'),\n                            this.checkbox('Role', 'Role', 'infoRole'),\n                            this.checkbox('Prefix', 'Prefix', 'infoPrefix')\n                        ], true),\n                        this.rule(),\n                        this.checkbox('Collapsible', 'Collapsible Math', 'collapsible'),\n                        this.checkbox('AutoCollapse', 'Auto Collapse', 'autocollapse', { disabled: true }),\n                        this.rule(),\n                        this.checkbox('InTabOrder', 'Include in Tab Order', 'inTabOrder'),\n                        this.checkbox('AssistiveMml', 'Include Hidden MathML', 'assistiveMml')\n                    ]),\n                    this.submenu('Language', 'Language'),\n                    this.rule(),\n                    this.command('About', 'About MathJax', function () { return _this.about.post(); }),\n                    this.command('Help', 'MathJax Help', function () { return _this.help.post(); })\n                ]\n            }\n        });\n        var menu = this.menu;\n        this.about.attachMenu(menu);\n        this.help.attachMenu(menu);\n        this.originalText.attachMenu(menu);\n        this.annotationText.attachMenu(menu);\n        this.mathmlCode.attachMenu(menu);\n        this.zoomBox.attachMenu(menu);\n        this.checkLoadableItems();\n        this.enableExplorerItems(this.settings.explorer);\n        menu.showAnnotation = this.annotationText;\n        menu.copyAnnotation = this.copyAnnotation.bind(this);\n        menu.annotationTypes = this.options.annotationTypes;\n        ContextMenu.CssStyles.addInfoStyles(this.document.document);\n        ContextMenu.CssStyles.addMenuStyles(this.document.document);\n    };\n    Menu.prototype.checkLoadableItems = function () {\n        var e_1, _a;\n        if (MathJax && MathJax._ && MathJax.loader && MathJax.startup) {\n            if (this.settings.collapsible && (!MathJax._.a11y || !MathJax._.a11y.complexity)) {\n                this.loadA11y('complexity');\n            }\n            if (this.settings.explorer && (!MathJax._.a11y || !MathJax._.a11y.explorer)) {\n                this.loadA11y('explorer');\n            }\n            if (this.settings.assistiveMml && (!MathJax._.a11y || !MathJax._.a11y['assistive-mml'])) {\n                this.loadA11y('assistive-mml');\n            }\n        }\n        else {\n            var menu = this.menu;\n            try {\n                for (var _b = __values(Object.keys(this.jax)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var name_1 = _c.value;\n                    if (!this.jax[name_1]) {\n                        menu.findID('Settings', 'Renderer', name_1).disable();\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            menu.findID('Accessibility', 'Activate').disable();\n            menu.findID('Accessibility', 'AutoCollapse').disable();\n            menu.findID('Accessibility', 'Collapsible').disable();\n        }\n    };\n    Menu.prototype.enableExplorerItems = function (enable) {\n        var e_2, _a;\n        var menu = this.menu.findID('Accessibility', 'Activate').getMenu();\n        try {\n            for (var _b = __values(menu.getItems().slice(1)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var item = _c.value;\n                if (item instanceof ContextMenu.Rule)\n                    break;\n                enable ? item.enable() : item.disable();\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    Menu.prototype.mergeUserSettings = function () {\n        try {\n            var settings = localStorage.getItem(Menu.MENU_STORAGE);\n            if (!settings)\n                return;\n            Object.assign(this.settings, JSON.parse(settings));\n            this.setA11y(this.settings);\n        }\n        catch (err) {\n            console.log('MathJax localStorage error: ' + err.message);\n        }\n    };\n    Menu.prototype.saveUserSettings = function () {\n        var e_3, _a;\n        var settings = {};\n        try {\n            for (var _b = __values(Object.keys(this.settings)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var name_2 = _c.value;\n                if (this.settings[name_2] !== this.defaultSettings[name_2]) {\n                    settings[name_2] = this.settings[name_2];\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        try {\n            if (Object.keys(settings).length) {\n                localStorage.setItem(Menu.MENU_STORAGE, JSON.stringify(settings));\n            }\n            else {\n                localStorage.removeItem(Menu.MENU_STORAGE);\n            }\n        }\n        catch (err) {\n            console.log('MathJax localStorage error: ' + err.message);\n        }\n    };\n    Menu.prototype.setA11y = function (options) {\n        if (MathJax._.a11y && MathJax._.a11y.explorer) {\n            MathJax._.a11y.explorer_ts.setA11yOptions(this.document, options);\n        }\n    };\n    Menu.prototype.getA11y = function (options) {\n        if (MathJax._.a11y && MathJax._.a11y.explorer) {\n            return this.document.options.a11y[options];\n        }\n    };\n    Menu.prototype.setScale = function (scale) {\n        this.document.outputJax.options.scale = parseFloat(scale);\n        this.document.rerender();\n    };\n    Menu.prototype.setRenderer = function (jax) {\n        var _this = this;\n        if (this.jax[jax]) {\n            this.setOutputJax(jax);\n        }\n        else {\n            var name_3 = jax.toLowerCase();\n            this.loadComponent('output/' + name_3, function () {\n                var startup = MathJax.startup;\n                if (name_3 in startup.constructors) {\n                    startup.useOutput(name_3, true);\n                    startup.output = startup.getOutputJax();\n                    _this.jax[jax] = startup.output;\n                    _this.setOutputJax(jax);\n                }\n            });\n        }\n    };\n    Menu.prototype.setOutputJax = function (jax) {\n        this.jax[jax].setAdaptor(this.document.adaptor);\n        this.document.outputJax = this.jax[jax];\n        this.rerender();\n    };\n    Menu.prototype.setTabOrder = function (tab) {\n        this.menu.getStore().inTaborder(tab);\n    };\n    Menu.prototype.setAssistiveMml = function (mml) {\n        if (!mml || (MathJax._.a11y && MathJax._.a11y['assistive-mml'])) {\n            this.rerender();\n        }\n        else {\n            this.loadA11y('assistive-mml');\n        }\n    };\n    Menu.prototype.setExplorer = function (explore) {\n        this.enableExplorerItems(explore);\n        if (!explore || (MathJax._.a11y && MathJax._.a11y.explorer)) {\n            this.rerender(this.settings.collapsible ? MathItem_js_1.STATE.RERENDER : MathItem_js_1.STATE.COMPILED);\n        }\n        else {\n            this.loadA11y('explorer');\n        }\n    };\n    Menu.prototype.setCollapsible = function (collapse) {\n        if (!collapse || (MathJax._.a11y && MathJax._.a11y.complexity)) {\n            this.rerender(MathItem_js_1.STATE.COMPILED);\n        }\n        else {\n            this.loadA11y('complexity');\n        }\n    };\n    Menu.prototype.scaleAllMath = function () {\n        var scale = (parseFloat(this.settings.scale) * 100).toFixed(1).replace(/.0$/, '');\n        var percent = prompt('Scale all mathematics (compared to surrounding text) by', scale + '%');\n        if (percent) {\n            if (percent.match(/^\\s*\\d+(\\.\\d*)?\\s*%?\\s*$/)) {\n                var scale_1 = parseFloat(percent) / 100;\n                if (scale_1) {\n                    this.setScale(String(scale_1));\n                }\n                else {\n                    alert('The scale should not be zero');\n                }\n            }\n            else {\n                alert('The scale should be a percentage (e.g., 120%)');\n            }\n        }\n    };\n    Menu.prototype.resetDefaults = function () {\n        var e_4, _a;\n        Menu.loading++;\n        var pool = this.menu.getPool();\n        var settings = this.defaultSettings;\n        try {\n            for (var _b = __values(Object.keys(this.settings)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var name_4 = _c.value;\n                var variable = pool.lookup(name_4);\n                if (variable) {\n                    variable.setValue(settings[name_4]);\n                    var item = variable.items[0];\n                    if (item) {\n                        item.executeCallbacks_();\n                    }\n                }\n                else {\n                    this.settings[name_4] = settings[name_4];\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        Menu.loading--;\n        this.rerender(MathItem_js_1.STATE.COMPILED);\n    };\n    Menu.prototype.checkComponent = function (name) {\n        var promise = Menu.loadingPromises.get(name);\n        if (promise) {\n            mathjax_js_1.mathjax.retryAfter(promise);\n        }\n    };\n    Menu.prototype.loadComponent = function (name, callback) {\n        if (Menu.loadingPromises.has(name))\n            return;\n        var loader = MathJax.loader;\n        if (!loader)\n            return;\n        Menu.loading++;\n        var promise = loader.load(name).then(function () {\n            Menu.loading--;\n            Menu.loadingPromises.delete(name);\n            callback();\n            if (Menu.loading === 0 && Menu._loadingPromise) {\n                Menu._loadingPromise = null;\n                Menu._loadingOK();\n            }\n        }).catch(function (err) {\n            if (Menu._loadingPromise) {\n                Menu._loadingPromise = null;\n                Menu._loadingFailed(err);\n            }\n            else {\n                console.log(err);\n            }\n        });\n        Menu.loadingPromises.set(name, promise);\n    };\n    Menu.prototype.loadA11y = function (component) {\n        var _this = this;\n        var noEnrich = !MathItem_js_1.STATE.ENRICHED;\n        this.loadComponent('a11y/' + component, function () {\n            var startup = MathJax.startup;\n            mathjax_js_1.mathjax.handlers.unregister(startup.handler);\n            startup.handler = startup.getHandler();\n            mathjax_js_1.mathjax.handlers.register(startup.handler);\n            var document = _this.document;\n            _this.document = startup.document = startup.getDocument();\n            _this.document.menu = _this;\n            _this.transferMathList(document);\n            _this.document.processed = document.processed;\n            if (!Menu._loadingPromise) {\n                _this.rerender(component === 'complexity' || noEnrich ? MathItem_js_1.STATE.COMPILED : MathItem_js_1.STATE.TYPESET);\n            }\n        });\n    };\n    Menu.prototype.transferMathList = function (document) {\n        var e_5, _a;\n        var MathItem = this.document.options.MathItem;\n        try {\n            for (var _b = __values(document.math), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var item = _c.value;\n                var math = new MathItem();\n                Object.assign(math, item);\n                this.document.math.push(math);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    };\n    Menu.prototype.formatSource = function (text) {\n        return text.trim().replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    };\n    Menu.prototype.toMML = function (math) {\n        return this.MmlVisitor.visitTree(math.root, math, {\n            texHints: this.settings.texHints,\n            semantics: (this.settings.semantics && math.inputJax.name !== 'MathML')\n        });\n    };\n    Menu.prototype.zoom = function (event, type, math) {\n        if (!event || this.isZoomEvent(event, type)) {\n            this.menu.mathItem = math;\n            if (event) {\n                this.menu.post(event);\n            }\n            this.zoomBox.post();\n        }\n    };\n    Menu.prototype.isZoomEvent = function (event, zoom) {\n        return (this.settings.zoom === zoom &&\n            (!this.settings.alt || event.altKey) &&\n            (!this.settings.ctrl || event.ctrlKey) &&\n            (!this.settings.cmd || event.metaKey) &&\n            (!this.settings.shift || event.shiftKey));\n    };\n    Menu.prototype.rerender = function (start) {\n        if (start === void 0) { start = MathItem_js_1.STATE.TYPESET; }\n        this.rerenderStart = Math.min(start, this.rerenderStart);\n        if (!Menu.loading) {\n            this.document.rerender(this.rerenderStart);\n            this.rerenderStart = MathItem_js_1.STATE.LAST;\n        }\n    };\n    Menu.prototype.copyMathML = function () {\n        this.copyToClipboard(this.toMML(this.menu.mathItem));\n    };\n    Menu.prototype.copyOriginal = function () {\n        this.copyToClipboard(this.menu.mathItem.math);\n    };\n    Menu.prototype.copyAnnotation = function () {\n        this.copyToClipboard(this.menu.annotation);\n    };\n    Menu.prototype.copyToClipboard = function (text) {\n        var input = document.createElement('textarea');\n        input.value = text;\n        input.setAttribute('readonly', '');\n        input.style.cssText = 'height: 1px; width: 1px; padding: 1px; position: absolute; left: -10px';\n        document.body.appendChild(input);\n        input.select();\n        try {\n            document.execCommand('copy');\n        }\n        catch (error) {\n            alert('Can\\'t copy to clipboard: ' + error.message);\n        }\n        document.body.removeChild(input);\n    };\n    Menu.prototype.addMenu = function (math) {\n        var _this = this;\n        var element = math.typesetRoot;\n        element.addEventListener('contextmenu', function () { return _this.menu.mathItem = math; }, true);\n        element.addEventListener('keydown', function () { return _this.menu.mathItem = math; }, true);\n        element.addEventListener('click', function (event) { return _this.zoom(event, 'Click', math); }, true);\n        element.addEventListener('dblclick', function (event) { return _this.zoom(event, 'DoubleClick', math); }, true);\n        this.menu.getStore().insert(element);\n    };\n    Menu.prototype.clear = function () {\n        this.menu.getStore().clear();\n    };\n    Menu.prototype.variable = function (name, action) {\n        var _this = this;\n        return {\n            name: name,\n            getter: function () { return _this.settings[name]; },\n            setter: function (value) {\n                _this.settings[name] = value;\n                action && action(value);\n                _this.saveUserSettings();\n            }\n        };\n    };\n    Menu.prototype.a11yVar = function (name) {\n        var _this = this;\n        return {\n            name: name,\n            getter: function () { return _this.getA11y(name); },\n            setter: function (value) {\n                _this.settings[name] = value;\n                var options = {};\n                options[name] = value;\n                _this.setA11y(options);\n                _this.saveUserSettings();\n            }\n        };\n    };\n    Menu.prototype.submenu = function (id, content, entries, disabled) {\n        var e_6, _a;\n        if (entries === void 0) { entries = []; }\n        if (disabled === void 0) { disabled = false; }\n        var items = [];\n        try {\n            for (var entries_1 = __values(entries), entries_1_1 = entries_1.next(); !entries_1_1.done; entries_1_1 = entries_1.next()) {\n                var entry = entries_1_1.value;\n                if (Array.isArray(entry)) {\n                    items = items.concat(entry);\n                }\n                else {\n                    items.push(entry);\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (entries_1_1 && !entries_1_1.done && (_a = entries_1.return)) _a.call(entries_1);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        return { type: 'submenu', id: id, content: content, menu: { items: items }, disabled: (items.length === 0) || disabled };\n    };\n    Menu.prototype.command = function (id, content, action, other) {\n        if (other === void 0) { other = {}; }\n        return Object.assign({ type: 'command', id: id, content: content, action: action }, other);\n    };\n    Menu.prototype.checkbox = function (id, content, variable, other) {\n        if (other === void 0) { other = {}; }\n        return Object.assign({ type: 'checkbox', id: id, content: content, variable: variable }, other);\n    };\n    Menu.prototype.radioGroup = function (variable, radios) {\n        var _this = this;\n        return radios.map(function (def) { return _this.radio(def[0], def[1] || def[0], variable); });\n    };\n    Menu.prototype.radio = function (id, content, variable, other) {\n        if (other === void 0) { other = {}; }\n        return Object.assign({ type: 'radio', id: id, content: content, variable: variable }, other);\n    };\n    Menu.prototype.label = function (id, content) {\n        return { type: 'label', id: id, content: content };\n    };\n    Menu.prototype.rule = function () {\n        return { type: 'rule' };\n    };\n    Menu.MENU_STORAGE = 'MathJax-Menu-Settings';\n    Menu.OPTIONS = {\n        settings: {\n            texHints: true,\n            semantics: false,\n            zoom: 'NoZoom',\n            zscale: '200%',\n            renderer: 'CHTML',\n            alt: false,\n            cmd: false,\n            ctrl: false,\n            shift: false,\n            scale: 1,\n            autocollapse: false,\n            collapsible: false,\n            inTabOrder: true,\n            assistiveMml: true,\n            explorer: false\n        },\n        jax: {\n            CHTML: null,\n            SVG: null\n        },\n        annotationTypes: Options_js_1.expandable({\n            TeX: ['TeX', 'LaTeX', 'application/x-tex'],\n            StarMath: ['StarMath 5.0'],\n            Maple: ['Maple'],\n            ContentMathML: ['MathML-Content', 'application/mathml-content+xml'],\n            OpenMath: ['OpenMath']\n        })\n    };\n    Menu.loading = 0;\n    Menu.loadingPromises = new Map();\n    Menu._loadingPromise = null;\n    Menu._loadingOK = null;\n    Menu._loadingFailed = null;\n    return Menu;\n}());\nexports.Menu = Menu;\n//# sourceMappingURL=Menu.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SerializedMmlVisitor_js_1 = require(\"../../core/MmlTree/SerializedMmlVisitor.js\");\nvar Options_js_1 = require(\"../../util/Options.js\");\nvar MmlVisitor = (function (_super) {\n    __extends(MmlVisitor, _super);\n    function MmlVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.options = {\n            texHints: true,\n            semantics: false,\n        };\n        _this.mathItem = null;\n        return _this;\n    }\n    MmlVisitor.prototype.visitTree = function (node, math, options) {\n        if (math === void 0) { math = null; }\n        if (options === void 0) { options = {}; }\n        this.mathItem = math;\n        Options_js_1.userOptions(this.options, options);\n        return this.visitNode(node, '');\n    };\n    MmlVisitor.prototype.visitTeXAtomNode = function (node, space) {\n        if (this.options.texHints) {\n            return _super.prototype.visitTeXAtomNode.call(this, node, space);\n        }\n        if (node.childNodes[0] && node.childNodes[0].childNodes.length === 1) {\n            return this.visitNode(node.childNodes[0], space);\n        }\n        return space + '<mrow' + this.getAttributes(node) + '>\\n'\n            + this.childNodeMml(node, space + '  ', '\\n')\n            + space + '</mrow>';\n    };\n    MmlVisitor.prototype.visitMathNode = function (node, space) {\n        if (!this.options.semantics || this.mathItem.inputJax.name !== 'TeX') {\n            return _super.prototype.visitDefault.call(this, node, space);\n        }\n        var addRow = node.childNodes.length && node.childNodes[0].childNodes.length > 1;\n        return space + '<math' + this.getAttributes(node) + '>\\n'\n            + space + '  <semantics>\\n'\n            + (addRow ? space + '    <mrow>\\n' : '')\n            + this.childNodeMml(node, space + (addRow ? '      ' : '    '), '\\n')\n            + (addRow ? space + '    </mrow>\\n' : '')\n            + space + '    <annotation encoding=\"application/x-tex\">' + this.mathItem.math + '</annotation>\\n'\n            + space + '  </semantics>\\n'\n            + space + '</math>';\n    };\n    return MmlVisitor;\n}(SerializedMmlVisitor_js_1.SerializedMmlVisitor));\nexports.MmlVisitor = MmlVisitor;\n//# sourceMappingURL=MmlVisitor.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SelectableInfo = (function (_super) {\n    __extends(SelectableInfo, _super);\n    function SelectableInfo() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SelectableInfo.prototype.addEvents = function (element) {\n        var _this = this;\n        element.addEventListener('keypress', function (event) {\n            if (event.key === 'a' && (event.ctrlKey || event.metaKey)) {\n                _this.selectAll();\n                _this.stop(event);\n            }\n        });\n    };\n    SelectableInfo.prototype.selectAll = function () {\n        var selection = document.getSelection();\n        selection.selectAllChildren(this.getHtml().querySelector('pre'));\n    };\n    SelectableInfo.prototype.copyToClipboard = function () {\n        this.selectAll();\n        try {\n            document.execCommand('copy');\n        }\n        catch (err) {\n            alert('Can\\'t copy to clipboard: ' + err.message);\n        }\n        document.getSelection().removeAllRanges();\n    };\n    SelectableInfo.prototype.generateHtml = function () {\n        var _this = this;\n        _super.prototype.generateHtml.call(this);\n        var footer = this.getHtml().querySelector('span.' + ContextMenu.HtmlClasses['INFOSIGNATURE']);\n        var button = footer.appendChild(document.createElement('input'));\n        button.type = 'button';\n        button.value = 'Copy to Clipboard';\n        button.addEventListener('click', function (event) { return _this.copyToClipboard(); });\n    };\n    return SelectableInfo;\n}(ContextMenu.Info));\nexports.SelectableInfo = SelectableInfo;\n//# sourceMappingURL=SelectableInfo.js.map","\"use strict\";\nObject.defineProperty(exports, '__esModule', {value: true});\nexports.mathjax = MathJax._.mathjax.mathjax;\n","\"use strict\";\nObject.defineProperty(exports, '__esModule', {value: true});\nexports.protoItem = MathJax._.core.MathItem.protoItem;\nexports.AbstractMathItem = MathJax._.core.MathItem.AbstractMathItem;\nexports.STATE = MathJax._.core.MathItem.STATE;\nexports.newState = MathJax._.core.MathItem.newState;\n","import '../../../../../mj-context-menu/dist/context_menu.js';\n\n//\n//  Check if the global ContextMenu is not defined (in node it won't be\n//  because it is local to the module), and define dummy classes\n//  for the ones we need (they should never be used in node since the\n//  menus are only useful in the browser).\n//\nif (typeof ContextMenu === 'undefined') {\n    global.ContextMenu = {\n        ContextMenu: class {},\n        Info: class {}\n    };\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar ContextMenu;\n(function (ContextMenu) {\n    var Variable = (function () {\n        function Variable(name, getter, setter) {\n            this.name = name;\n            this.getter = getter;\n            this.setter = setter;\n            this.items = [];\n        }\n        Variable.prototype.getName = function () {\n            return this.name;\n        };\n        Variable.prototype.getValue = function (node) {\n            try {\n                return this.getter(node);\n            }\n            catch (e) {\n                ContextMenu.MenuUtil.error(e, 'Command of variable ' + this.name + ' failed.');\n            }\n        };\n        Variable.prototype.setValue = function (value, node) {\n            try {\n                this.setter(value, node);\n            }\n            catch (e) {\n                ContextMenu.MenuUtil.error(e, 'Command of variable ' + this.name + ' failed.');\n            }\n            this.update();\n        };\n        Variable.prototype.register = function (item) {\n            if (this.items.indexOf(item) === -1) {\n                this.items.push(item);\n            }\n        };\n        Variable.prototype.unregister = function (item) {\n            var index = this.items.indexOf(item);\n            if (index !== -1) {\n                this.items.splice(index, 1);\n            }\n        };\n        Variable.prototype.update = function () {\n            this.items.forEach(function (x) { return x.update(); });\n        };\n        Variable.prototype.registerCallback = function (func) {\n            this.items.forEach(function (x) { return x.registerCallback(func); });\n        };\n        Variable.prototype.unregisterCallback = function (func) {\n            this.items.forEach(function (x) { return x.unregisterCallback(func); });\n        };\n        return Variable;\n    }());\n    ContextMenu.Variable = Variable;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var VariablePool = (function () {\n        function VariablePool() {\n            this.pool = {};\n        }\n        VariablePool.prototype.insert = function (variable) {\n            this.pool[variable.getName()] = variable;\n        };\n        VariablePool.prototype.lookup = function (name) {\n            return this.pool[name];\n        };\n        VariablePool.prototype.remove = function (name) {\n            delete this.pool[name];\n        };\n        VariablePool.prototype.update = function () {\n            for (var variable in this.pool) {\n                this.pool[variable].update();\n            }\n        };\n        return VariablePool;\n    }());\n    ContextMenu.VariablePool = VariablePool;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var KEY;\n    (function (KEY) {\n        KEY[KEY[\"RETURN\"] = 13] = \"RETURN\";\n        KEY[KEY[\"ESCAPE\"] = 27] = \"ESCAPE\";\n        KEY[KEY[\"SPACE\"] = 32] = \"SPACE\";\n        KEY[KEY[\"LEFT\"] = 37] = \"LEFT\";\n        KEY[KEY[\"UP\"] = 38] = \"UP\";\n        KEY[KEY[\"RIGHT\"] = 39] = \"RIGHT\";\n        KEY[KEY[\"DOWN\"] = 40] = \"DOWN\";\n    })(KEY = ContextMenu.KEY || (ContextMenu.KEY = {}));\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    ContextMenu.MOUSE = {\n        CLICK: 'click',\n        DBLCLICK: 'dblclick',\n        DOWN: 'mousedown',\n        UP: 'mouseup',\n        OVER: 'mouseover',\n        OUT: 'mouseout',\n        MOVE: 'mousemove',\n        SELECTSTART: 'selectstart',\n        SELECTEND: 'selectend',\n    };\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var AbstractNavigatable = (function () {\n        function AbstractNavigatable() {\n            this.bubble = false;\n        }\n        AbstractNavigatable.prototype.bubbleKey = function () {\n            this.bubble = true;\n        };\n        AbstractNavigatable.prototype.keydown = function (event) {\n            switch (event.keyCode) {\n                case ContextMenu.KEY.ESCAPE:\n                    this.escape(event);\n                    break;\n                case ContextMenu.KEY.RIGHT:\n                    this.right(event);\n                    break;\n                case ContextMenu.KEY.LEFT:\n                    this.left(event);\n                    break;\n                case ContextMenu.KEY.UP:\n                    this.up(event);\n                    break;\n                case ContextMenu.KEY.DOWN:\n                    this.down(event);\n                    break;\n                case ContextMenu.KEY.RETURN:\n                case ContextMenu.KEY.SPACE:\n                    this.space(event);\n                    break;\n                default:\n                    return;\n            }\n            this.bubble ? this.bubble = false : this.stop(event);\n        };\n        AbstractNavigatable.prototype.escape = function (event) { };\n        AbstractNavigatable.prototype.space = function (event) { };\n        AbstractNavigatable.prototype.left = function (event) { };\n        AbstractNavigatable.prototype.right = function (event) { };\n        AbstractNavigatable.prototype.up = function (event) { };\n        AbstractNavigatable.prototype.down = function (event) { };\n        AbstractNavigatable.prototype.stop = function (event) {\n            if (event) {\n                event.stopPropagation();\n                event.preventDefault();\n                event.cancelBubble = true;\n            }\n        };\n        AbstractNavigatable.prototype.mousedown = function (event) {\n            return this.stop(event);\n        };\n        AbstractNavigatable.prototype.mouseup = function (event) {\n            return this.stop(event);\n        };\n        AbstractNavigatable.prototype.mouseover = function (event) {\n            return this.stop(event);\n        };\n        AbstractNavigatable.prototype.mouseout = function (event) {\n            return this.stop(event);\n        };\n        AbstractNavigatable.prototype.click = function (event) {\n            return this.stop(event);\n        };\n        AbstractNavigatable.prototype.addEvents = function (element) {\n            element.addEventListener(ContextMenu.MOUSE.DOWN, this.mousedown.bind(this));\n            element.addEventListener(ContextMenu.MOUSE.UP, this.mouseup.bind(this));\n            element.addEventListener(ContextMenu.MOUSE.OVER, this.mouseover.bind(this));\n            element.addEventListener(ContextMenu.MOUSE.OUT, this.mouseout.bind(this));\n            element.addEventListener(ContextMenu.MOUSE.CLICK, this.click.bind(this));\n            element.addEventListener('keydown', this.keydown.bind(this));\n            element.addEventListener('dragstart', this.stop.bind(this));\n            element.addEventListener('selectstart', this.stop.bind(this));\n            element.addEventListener('contextmenu', this.stop.bind(this));\n            element.addEventListener('dblclick', this.stop.bind(this));\n        };\n        return AbstractNavigatable;\n    }());\n    ContextMenu.AbstractNavigatable = AbstractNavigatable;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var PREFIX = 'CtxtMenu';\n    function prefix_(name) {\n        return (PREFIX + '_' + name);\n    }\n    function prefixClass_(name) {\n        return prefix_(name);\n    }\n    function prefixAttr_(name) {\n        return prefix_(name);\n    }\n    ContextMenu.HtmlClasses = {\n        ATTACHED: prefixClass_('Attached'),\n        CONTEXTMENU: prefixClass_('ContextMenu'),\n        MENU: prefixClass_('Menu'),\n        MENUARROW: prefixClass_('MenuArrow'),\n        MENUACTIVE: prefixClass_('MenuActive'),\n        MENUCHECK: prefixClass_('MenuCheck'),\n        MENUCLOSE: prefixClass_('MenuClose'),\n        MENUCOMBOBOX: prefixClass_('MenuComboBox'),\n        MENUDISABLED: prefixClass_('MenuDisabled'),\n        MENUFRAME: prefixClass_('MenuFrame'),\n        MENUITEM: prefixClass_('MenuItem'),\n        MENULABEL: prefixClass_('MenuLabel'),\n        MENURADIOCHECK: prefixClass_('MenuRadioCheck'),\n        MENUINPUTBOX: prefixClass_('MenuInputBox'),\n        MENURULE: prefixClass_('MenuRule'),\n        MOUSEPOST: prefixClass_('MousePost'),\n        RTL: prefixClass_('RTL'),\n        INFO: prefixClass_('Info'),\n        INFOCLOSE: prefixClass_('InfoClose'),\n        INFOCONTENT: prefixClass_('InfoContent'),\n        INFOSIGNATURE: prefixClass_('InfoSignature'),\n        INFOTITLE: prefixClass_('InfoTitle')\n    };\n    ContextMenu.HtmlAttrs = {\n        COUNTER: prefixAttr_('Counter'),\n        KEYDOWNFUNC: prefixAttr_('keydownFunc'),\n        CONTEXTMENUFUNC: prefixAttr_('contextmenuFunc'),\n        OLDTAB: prefixAttr_('Oldtabindex'),\n        TOUCHFUNC: prefixAttr_('TouchFunc'),\n    };\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var MenuElement = (function (_super) {\n        __extends(MenuElement, _super);\n        function MenuElement() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        MenuElement.prototype.addAttributes = function (attributes) {\n            for (var attr in attributes) {\n                this.html.setAttribute(attr, attributes[attr]);\n            }\n        };\n        MenuElement.prototype.getHtml = function () {\n            if (!this.html) {\n                this.generateHtml();\n            }\n            return this.html;\n        };\n        MenuElement.prototype.setHtml = function (html) {\n            this.html = html;\n            this.addEvents(html);\n        };\n        MenuElement.prototype.generateHtml = function () {\n            var html = document.createElement('div');\n            html.classList.add(this.className);\n            html.setAttribute('role', this.role);\n            this.setHtml(html);\n        };\n        MenuElement.prototype.focus = function () {\n            var html = this.getHtml();\n            html.setAttribute('tabindex', '0');\n            html.focus();\n        };\n        MenuElement.prototype.unfocus = function () {\n            var html = this.getHtml();\n            if (html.hasAttribute('tabindex')) {\n                html.setAttribute('tabindex', '-1');\n            }\n            try {\n                html.blur();\n            }\n            catch (e) {\n            }\n        };\n        return MenuElement;\n    }(ContextMenu.AbstractNavigatable));\n    ContextMenu.MenuElement = MenuElement;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var AbstractEntry = (function (_super) {\n        __extends(AbstractEntry, _super);\n        function AbstractEntry(menu, type) {\n            var _this = _super.call(this) || this;\n            _this.className = ContextMenu.HtmlClasses['MENUITEM'];\n            _this.role = 'menuitem';\n            _this.type = 'entry';\n            _this.hidden = false;\n            _this.menu = menu;\n            _this.type = type;\n            return _this;\n        }\n        AbstractEntry.prototype.getMenu = function () {\n            return this.menu;\n        };\n        AbstractEntry.prototype.setMenu = function (menu) {\n            this.menu = menu;\n        };\n        AbstractEntry.prototype.getType = function () {\n            return this.type;\n        };\n        AbstractEntry.prototype.hide = function () {\n            this.hidden = true;\n            this.menu.generateMenu();\n        };\n        AbstractEntry.prototype.show = function () {\n            this.hidden = false;\n            this.menu.generateMenu();\n        };\n        AbstractEntry.prototype.isHidden = function () {\n            return this.hidden;\n        };\n        return AbstractEntry;\n    }(ContextMenu.MenuElement));\n    ContextMenu.AbstractEntry = AbstractEntry;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var AbstractPostable = (function (_super) {\n        __extends(AbstractPostable, _super);\n        function AbstractPostable() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.posted = false;\n            return _this;\n        }\n        AbstractPostable.prototype.isPosted = function () {\n            return this.posted;\n        };\n        AbstractPostable.prototype.post = function (x, y) {\n            if (this.posted) {\n                return;\n            }\n            if (typeof (x) !== 'undefined' && typeof (y) !== 'undefined') {\n                this.getHtml().setAttribute('style', 'left: ' + x + 'px; top: ' + y + 'px;');\n            }\n            this.display();\n            this.posted = true;\n        };\n        AbstractPostable.prototype.unpost = function () {\n            if (!this.posted) {\n                return;\n            }\n            var html = this.getHtml();\n            if (html.parentNode) {\n                html.parentNode.removeChild(html);\n            }\n            this.posted = false;\n        };\n        return AbstractPostable;\n    }(ContextMenu.MenuElement));\n    ContextMenu.AbstractPostable = AbstractPostable;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var AbstractMenu = (function (_super) {\n        __extends(AbstractMenu, _super);\n        function AbstractMenu() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.className = ContextMenu.HtmlClasses['CONTEXTMENU'];\n            _this.role = 'menu';\n            _this.items = [];\n            return _this;\n        }\n        AbstractMenu.prototype.getItems = function () {\n            return this.items;\n        };\n        AbstractMenu.prototype.getPool = function () {\n            return this.variablePool;\n        };\n        AbstractMenu.prototype.getFocused = function () {\n            return this.focused;\n        };\n        AbstractMenu.prototype.setFocused = function (item) {\n            if (this.focused === item) {\n                return;\n            }\n            if (!this.focused) {\n                this.unfocus();\n            }\n            var old = this.focused;\n            this.focused = item;\n            if (old) {\n                old.unfocus();\n            }\n        };\n        AbstractMenu.prototype.up = function (event) {\n            var items = this.getItems().filter(function (x) { return (x instanceof ContextMenu.AbstractItem) && (!x.isHidden()); });\n            if (items.length === 0) {\n                return;\n            }\n            if (!this.focused) {\n                items[items.length - 1].focus();\n                return;\n            }\n            var index = items.indexOf(this.focused);\n            if (index === -1) {\n                return;\n            }\n            index = index ? --index : items.length - 1;\n            items[index].focus();\n        };\n        AbstractMenu.prototype.down = function (event) {\n            var items = this.getItems().filter(function (x) { return (x instanceof ContextMenu.AbstractItem) && (!x.isHidden()); });\n            if (items.length === 0) {\n                return;\n            }\n            if (!this.focused) {\n                items[0].focus();\n                return;\n            }\n            var index = items.indexOf(this.focused);\n            if (index === -1) {\n                return;\n            }\n            index++;\n            index = (index === items.length) ? 0 : index;\n            items[index].focus();\n        };\n        AbstractMenu.prototype.generateHtml = function () {\n            _super.prototype.generateHtml.call(this);\n            this.generateMenu();\n        };\n        AbstractMenu.prototype.generateMenu = function () {\n            var html = this.getHtml();\n            html.classList.add(ContextMenu.HtmlClasses['MENU']);\n            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                if (!item.isHidden()) {\n                    html.appendChild(item.getHtml());\n                    continue;\n                }\n                var itemHtml = item.getHtml();\n                if (itemHtml.parentNode) {\n                    itemHtml.parentNode.removeChild(itemHtml);\n                }\n            }\n        };\n        AbstractMenu.prototype.post = function (x, y) {\n            this.variablePool.update();\n            _super.prototype.post.call(this, x, y);\n        };\n        AbstractMenu.prototype.unpostSubmenus = function () {\n            var submenus = this.items.filter(function (x) { return x instanceof ContextMenu.Submenu; });\n            for (var _i = 0, submenus_1 = submenus; _i < submenus_1.length; _i++) {\n                var submenu = submenus_1[_i];\n                submenu.getSubmenu().unpost();\n                if (submenu !== this.getFocused()) {\n                    submenu.unfocus();\n                }\n            }\n        };\n        AbstractMenu.prototype.unpost = function () {\n            _super.prototype.unpost.call(this);\n            this.unpostSubmenus();\n            this.setFocused(null);\n        };\n        AbstractMenu.prototype.find = function (id) {\n            for (var _i = 0, _a = this.getItems(); _i < _a.length; _i++) {\n                var item = _a[_i];\n                if (item.getType() === 'rule') {\n                    continue;\n                }\n                if (item.getId() === id) {\n                    return item;\n                }\n                if (item.getType() === 'submenu') {\n                    var result = item.getSubmenu().find(id);\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n            return null;\n        };\n        AbstractMenu.prototype.parseItems = function (items) {\n            var _this = this;\n            var hidden = items.map(function (x) { return [_this.parseItem.bind(_this)(x), x.hidden]; });\n            hidden.forEach(function (x) { return x[1] && x[0].hide(); });\n        };\n        AbstractMenu.prototype.parseItem = function (item) {\n            var parseMapping_ = {\n                'checkbox': ContextMenu.Checkbox.parse,\n                'combo': ContextMenu.Combo.parse,\n                'command': ContextMenu.Command.parse,\n                'label': ContextMenu.Label.parse,\n                'radio': ContextMenu.Radio.parse,\n                'rule': ContextMenu.Rule.parse,\n                'submenu': ContextMenu.Submenu.parse\n            };\n            var func = parseMapping_[item['type']];\n            if (func) {\n                var menuItem = func(item, this);\n                this.getItems().push(menuItem);\n                if (item['disabled']) {\n                    menuItem.disable();\n                }\n                return menuItem;\n            }\n        };\n        return AbstractMenu;\n    }(ContextMenu.AbstractPostable));\n    ContextMenu.AbstractMenu = AbstractMenu;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var MenuStore = (function () {\n        function MenuStore(menu) {\n            this.store = [];\n            this.active = null;\n            this.counter = 0;\n            this.attachedClass = ContextMenu.HtmlClasses['ATTACHED'] + '_' +\n                ContextMenu.MenuUtil.counter();\n            this.taborder = true;\n            this.attrMap = {};\n            this.menu = menu;\n        }\n        MenuStore.prototype.setActive = function (element) {\n            do {\n                if (this.store.indexOf(element) !== -1) {\n                    this.active = element;\n                    break;\n                }\n                element = element.parentNode;\n            } while (element);\n        };\n        MenuStore.prototype.getActive = function () {\n            return this.active;\n        };\n        MenuStore.prototype.next = function () {\n            var length = this.store.length;\n            if (length === 0) {\n                this.active = null;\n                return null;\n            }\n            var index = this.store.indexOf(this.active);\n            index = index === -1 ? 0 : (index < length - 1 ? index + 1 : 0);\n            this.active = this.store[index];\n            return this.active;\n        };\n        MenuStore.prototype.previous = function () {\n            var length = this.store.length;\n            if (length === 0) {\n                this.active = null;\n                return null;\n            }\n            var last = length - 1;\n            var index = this.store.indexOf(this.active);\n            index = index === -1 ? last : (index === 0 ? last : index - 1);\n            this.active = this.store[index];\n            return this.active;\n        };\n        MenuStore.prototype.clear = function () {\n            this.remove(this.store);\n        };\n        MenuStore.prototype.insert = function (elementOrList) {\n            var elements = elementOrList instanceof HTMLElement ?\n                [elementOrList] : elementOrList;\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var element = elements_1[_i];\n                this.insertElement(element);\n            }\n            this.sort();\n        };\n        MenuStore.prototype.remove = function (elementOrList) {\n            var elements = elementOrList instanceof HTMLElement ?\n                [elementOrList] : elementOrList;\n            for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n                var element = elements_2[_i];\n                this.removeElement(element);\n            }\n            this.sort();\n        };\n        MenuStore.prototype.inTaborder = function (flag) {\n            if (this.taborder && !flag) {\n                this.removeTaborder();\n            }\n            if (!this.taborder && flag) {\n                this.insertTaborder();\n            }\n            this.taborder = flag;\n        };\n        MenuStore.prototype.insertTaborder = function () {\n            if (this.taborder) {\n                this.insertTaborder_();\n            }\n        };\n        MenuStore.prototype.removeTaborder = function () {\n            if (this.taborder) {\n                this.removeTaborder_();\n            }\n        };\n        MenuStore.prototype.insertElement = function (element) {\n            if (element.classList.contains(this.attachedClass)) {\n                return;\n            }\n            element.classList.add(this.attachedClass);\n            if (this.taborder) {\n                this.addTabindex(element);\n            }\n            this.addEvents(element);\n        };\n        MenuStore.prototype.removeElement = function (element) {\n            if (!element.classList.contains(this.attachedClass)) {\n                return;\n            }\n            element.classList.remove(this.attachedClass);\n            if (this.taborder) {\n                this.removeTabindex(element);\n            }\n            this.removeEvents(element);\n        };\n        MenuStore.prototype.sort = function () {\n            var nodes = document.getElementsByClassName(this.attachedClass);\n            this.store = [].slice.call(nodes);\n        };\n        MenuStore.prototype.insertTaborder_ = function () {\n            this.store.forEach(function (x) { return x.setAttribute('tabindex', '0'); });\n        };\n        MenuStore.prototype.removeTaborder_ = function () {\n            this.store.forEach(function (x) { return x.setAttribute('tabindex', '-1'); });\n        };\n        MenuStore.prototype.addTabindex = function (element) {\n            if (element.hasAttribute('tabindex')) {\n                element.setAttribute(ContextMenu.HtmlAttrs['OLDTAB'], element.getAttribute('tabindex'));\n            }\n            element.setAttribute('tabindex', '0');\n        };\n        MenuStore.prototype.removeTabindex = function (element) {\n            if (element.hasAttribute(ContextMenu.HtmlAttrs['OLDTAB'])) {\n                element.setAttribute('tabindex', element.getAttribute(ContextMenu.HtmlAttrs['OLDTAB']));\n                element.removeAttribute(ContextMenu.HtmlAttrs['OLDTAB']);\n            }\n            else {\n                element.removeAttribute('tabindex');\n            }\n        };\n        MenuStore.prototype.addEvents = function (element) {\n            if (element.hasAttribute(ContextMenu.HtmlAttrs['COUNTER'])) {\n                return;\n            }\n            this.addEvent(element, 'contextmenu', this.menu.post.bind(this.menu));\n            this.addEvent(element, 'keydown', this.keydown.bind(this));\n            element.setAttribute(ContextMenu.HtmlAttrs['COUNTER'], this.counter.toString());\n            this.counter++;\n        };\n        MenuStore.prototype.addEvent = function (element, name, func) {\n            var attrName = ContextMenu.HtmlAttrs[name.toUpperCase() + 'FUNC'];\n            this.attrMap[attrName + this.counter] = func;\n            element.addEventListener(name, func);\n        };\n        MenuStore.prototype.removeEvents = function (element) {\n            if (!element.hasAttribute(ContextMenu.HtmlAttrs['COUNTER'])) {\n                return;\n            }\n            var counter = element.getAttribute(ContextMenu.HtmlAttrs['COUNTER']);\n            this.removeEvent(element, 'contextmenu', counter);\n            this.removeEvent(element, 'keydown', counter);\n            element.removeAttribute(ContextMenu.HtmlAttrs['COUNTER']);\n        };\n        MenuStore.prototype.removeEvent = function (element, name, counter) {\n            var attrName = ContextMenu.HtmlAttrs[name.toUpperCase() + 'FUNC'];\n            var menuFunc = this.attrMap[attrName + counter];\n            element.removeEventListener(name, menuFunc);\n        };\n        MenuStore.prototype.keydown = function (event) {\n            if (event.keyCode === ContextMenu.KEY.SPACE) {\n                this.menu.post(event);\n                event.preventDefault();\n                event.stopImmediatePropagation();\n            }\n        };\n        return MenuStore;\n    }());\n    ContextMenu.MenuStore = MenuStore;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu_1) {\n    var ContextMenu = (function (_super) {\n        __extends(ContextMenu, _super);\n        function ContextMenu() {\n            var _this = _super.call(this) || this;\n            _this.moving = false;\n            _this.store_ = new ContextMenu_1.MenuStore(_this);\n            _this.widgets = [];\n            _this.variablePool = new ContextMenu_1.VariablePool();\n            return _this;\n        }\n        ContextMenu.parse = function (_a) {\n            var menu = _a.menu;\n            if (!menu) {\n                ContextMenu_1.MenuUtil.error(null, 'Wrong JSON format for menu.');\n                return;\n            }\n            var pool = menu.pool, items = menu.items, id = menu.id;\n            var ctxtMenu = new this();\n            pool.forEach(ctxtMenu.parseVariable.bind(ctxtMenu));\n            ctxtMenu.parseItems(items);\n            return ctxtMenu;\n        };\n        ContextMenu.prototype.generateHtml = function () {\n            if (this.isPosted()) {\n                this.unpost();\n            }\n            _super.prototype.generateHtml.call(this);\n            this.frame = document.createElement('div');\n            this.frame.classList.add(ContextMenu_1.HtmlClasses['MENUFRAME']);\n            var styleString = 'left: 0px; top: 0px; z-index: 200; width: 100%; ' +\n                'height: 100%; border: 0px; padding: 0px; margin: 0px;';\n            this.frame.setAttribute('style', 'position: absolute; ' + styleString);\n            var innerDiv = document.createElement('div');\n            innerDiv.setAttribute('style', 'position: fixed; ' + styleString);\n            this.frame.appendChild(innerDiv);\n            innerDiv.addEventListener('mousedown', function (event) {\n                this.unpost();\n                this.unpostWidgets();\n                this.stop(event);\n            }.bind(this));\n        };\n        ContextMenu.prototype.display = function () {\n            document.body.appendChild(this.frame);\n            this.frame.appendChild(this.getHtml());\n            this.focus();\n        };\n        ContextMenu.prototype.escape = function (event) {\n            this.unpost();\n            this.unpostWidgets();\n        };\n        ContextMenu.prototype.unpost = function () {\n            _super.prototype.unpost.call(this);\n            if (this.widgets.length > 0) {\n                return;\n            }\n            this.frame.parentNode.removeChild(this.frame);\n            var store = this.getStore();\n            if (!this.moving) {\n                store.insertTaborder();\n            }\n            store.getActive().focus();\n        };\n        ContextMenu.prototype.left = function (event) {\n            this.move_(this.store_.previous());\n        };\n        ContextMenu.prototype.right = function (event) {\n            this.move_(this.store_.next());\n        };\n        ContextMenu.prototype.getFrame = function () {\n            return this.frame;\n        };\n        ContextMenu.prototype.getStore = function () {\n            return this.store_;\n        };\n        ContextMenu.prototype.post = function (numberOrEvent, isY) {\n            if (typeof (isY) !== 'undefined') {\n                if (!this.moving) {\n                    this.getStore().removeTaborder();\n                }\n                _super.prototype.post.call(this, numberOrEvent, isY);\n                return;\n            }\n            var event = numberOrEvent;\n            var node;\n            if (event instanceof Event) {\n                node = event.target;\n                this.stop(event);\n            }\n            else {\n                node = event;\n            }\n            var x;\n            var y;\n            var keydown = false;\n            if (event instanceof MouseEvent) {\n                x = event.pageX, y = event.pageY;\n                if (!x && !y && event.clientX) {\n                    x = event.clientX + document.body.scrollLeft +\n                        document.documentElement.scrollLeft;\n                    y = event.clientY + document.body.scrollTop +\n                        document.documentElement.scrollTop;\n                }\n            }\n            if (!x && !y && node) {\n                var offsetX = window.pageXOffset || document.documentElement.scrollLeft;\n                var offsetY = window.pageYOffset || document.documentElement.scrollTop;\n                var rect = node.getBoundingClientRect();\n                x = (rect.right + rect.left) / 2 + offsetX;\n                y = (rect.bottom + rect.top) / 2 + offsetY;\n            }\n            this.getStore().setActive(node);\n            this.anchor = this.getStore().getActive();\n            var menu = this.getHtml();\n            var margin = 5;\n            if (x + menu.offsetWidth > document.body.offsetWidth - margin) {\n                x = document.body.offsetWidth - menu.offsetWidth - margin;\n            }\n            this.post(x, y);\n        };\n        ContextMenu.prototype.registerWidget = function (widget) {\n            this.widgets.push(widget);\n        };\n        ContextMenu.prototype.unregisterWidget = function (widget) {\n            var index = this.widgets.indexOf(widget);\n            if (index > -1) {\n                this.widgets.splice(index, 1);\n            }\n            if (this.widgets.length === 0) {\n                this.unpost();\n            }\n        };\n        ContextMenu.prototype.unpostWidgets = function () {\n            this.widgets.forEach(function (x) { return x.unpost(); });\n        };\n        ContextMenu.prototype.move_ = function (next) {\n            if (this.anchor && next !== this.anchor) {\n                this.moving = true;\n                this.unpost();\n                this.post(next);\n                this.moving = false;\n            }\n        };\n        ContextMenu.prototype.parseVariable = function (_a) {\n            var name = _a.name, getter = _a.getter, setter = _a.setter;\n            this.getPool().insert(new ContextMenu_1.Variable(name, getter, setter));\n        };\n        return ContextMenu;\n    }(ContextMenu_1.AbstractMenu));\n    ContextMenu_1.ContextMenu = ContextMenu;\n})(ContextMenu || (ContextMenu = {}));\nif (typeof window !== 'undefined') {\n    window.ContextMenu = ContextMenu;\n}\nvar ContextMenu;\n(function (ContextMenu) {\n    var SubMenu = (function (_super) {\n        __extends(SubMenu, _super);\n        function SubMenu(anchor) {\n            var _this = _super.call(this) || this;\n            _this.anchor = anchor;\n            _this.variablePool = _this.anchor.getMenu().getPool();\n            _this.setBaseMenu();\n            return _this;\n        }\n        SubMenu.parse = function (_a, anchor) {\n            var items = _a.items, id = _a.id;\n            var submenu = new SubMenu(anchor);\n            submenu.parseItems(items);\n            return submenu;\n        };\n        SubMenu.prototype.getAnchor = function () {\n            return this.anchor;\n        };\n        SubMenu.prototype.post = function () {\n            if (!this.anchor.getMenu().isPosted()) {\n                return;\n            }\n            var mobileFlag = false;\n            var rtlFlag = false;\n            var margin = 5;\n            var parent = this.anchor.getHtml();\n            var menu = this.getHtml();\n            var base = this.baseMenu.getFrame();\n            var side = 'left', mw = parent.offsetWidth;\n            var x = (mobileFlag ? 30 : mw - 2);\n            var y = 0;\n            while (parent && parent !== base) {\n                x += parent.offsetLeft;\n                y += parent.offsetTop;\n                parent = parent.parentNode;\n            }\n            if (!mobileFlag) {\n                if ((rtlFlag && x - mw - menu.offsetWidth > margin) ||\n                    (!rtlFlag && x + menu.offsetWidth >\n                        document.body.offsetWidth - margin)) {\n                    side = 'right';\n                    x = Math.max(margin, x - mw - menu.offsetWidth + 6);\n                }\n            }\n            _super.prototype.post.call(this, x, y);\n        };\n        SubMenu.prototype.display = function () {\n            this.baseMenu.getFrame().appendChild(this.getHtml());\n        };\n        SubMenu.prototype.setBaseMenu = function () {\n            var menu = this;\n            do {\n                menu = menu.anchor.getMenu();\n            } while (menu instanceof SubMenu);\n            this.baseMenu = menu;\n        };\n        return SubMenu;\n    }(ContextMenu.AbstractMenu));\n    ContextMenu.SubMenu = SubMenu;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var MenuUtil;\n    (function (MenuUtil) {\n        function close(item) {\n            var menu = item.getMenu();\n            if (menu instanceof ContextMenu.SubMenu) {\n                menu.baseMenu.unpost();\n            }\n            else {\n                menu.unpost();\n            }\n        }\n        MenuUtil.close = close;\n        function getActiveElement(item) {\n            var menu = item.getMenu();\n            var baseMenu = menu instanceof ContextMenu.SubMenu ?\n                menu.baseMenu : menu;\n            return baseMenu.getStore().getActive();\n        }\n        MenuUtil.getActiveElement = getActiveElement;\n        function error(error, msg) {\n            console.log('ContextMenu Error: ' + msg);\n        }\n        MenuUtil.error = error;\n        function counter() {\n            return count++;\n        }\n        MenuUtil.counter = counter;\n        var count = 0;\n    })(MenuUtil = ContextMenu.MenuUtil || (ContextMenu.MenuUtil = {}));\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var AbstractItem = (function (_super) {\n        __extends(AbstractItem, _super);\n        function AbstractItem(menu, type, _content, id) {\n            var _this = _super.call(this, menu, type) || this;\n            _this._content = _content;\n            _this.disabled = false;\n            _this.callbacks = [];\n            _this.id = id ? id : _content;\n            return _this;\n        }\n        Object.defineProperty(AbstractItem.prototype, \"content\", {\n            get: function () {\n                return this._content;\n            },\n            set: function (content) {\n                this._content = content;\n                this.generateHtml();\n                if (this.getMenu()) {\n                    this.getMenu().generateHtml();\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        AbstractItem.prototype.getId = function () {\n            return this.id;\n        };\n        AbstractItem.prototype.press = function () {\n            if (!this.disabled) {\n                this.executeAction();\n                this.executeCallbacks_();\n            }\n        };\n        AbstractItem.prototype.executeAction = function () { };\n        AbstractItem.prototype.registerCallback = function (func) {\n            if (this.callbacks.indexOf(func) === -1) {\n                this.callbacks.push(func);\n            }\n        };\n        AbstractItem.prototype.unregisterCallback = function (func) {\n            var index = this.callbacks.indexOf(func);\n            if (index !== -1) {\n                this.callbacks.splice(index, 1);\n            }\n        };\n        AbstractItem.prototype.mousedown = function (event) {\n            this.press();\n            this.stop(event);\n        };\n        AbstractItem.prototype.mouseover = function (event) {\n            this.focus();\n            this.stop(event);\n        };\n        AbstractItem.prototype.mouseout = function (event) {\n            this.deactivate();\n            this.stop(event);\n        };\n        AbstractItem.prototype.generateHtml = function () {\n            _super.prototype.generateHtml.call(this);\n            var html = this.getHtml();\n            html.setAttribute('aria-disabled', 'false');\n            html.textContent = this.content;\n        };\n        AbstractItem.prototype.activate = function () {\n            if (!this.disabled) {\n                this.getHtml().classList.add(ContextMenu.HtmlClasses['MENUACTIVE']);\n            }\n        };\n        AbstractItem.prototype.deactivate = function () {\n            this.getHtml().classList.remove(ContextMenu.HtmlClasses['MENUACTIVE']);\n        };\n        AbstractItem.prototype.focus = function () {\n            this.getMenu().setFocused(this);\n            _super.prototype.focus.call(this);\n            this.activate();\n        };\n        AbstractItem.prototype.unfocus = function () {\n            this.deactivate();\n            _super.prototype.unfocus.call(this);\n        };\n        AbstractItem.prototype.escape = function (event) {\n            ContextMenu.MenuUtil.close(this);\n        };\n        AbstractItem.prototype.up = function (event) {\n            this.getMenu().up(event);\n        };\n        AbstractItem.prototype.down = function (event) {\n            this.getMenu().down(event);\n        };\n        AbstractItem.prototype.left = function (event) {\n            if (this.getMenu() instanceof ContextMenu.ContextMenu) {\n                this.getMenu().left(event);\n                return;\n            }\n            var menu = this.getMenu();\n            menu.setFocused(null);\n            menu.getAnchor().focus();\n        };\n        AbstractItem.prototype.right = function (event) {\n            this.getMenu().right(event);\n        };\n        AbstractItem.prototype.space = function (event) {\n            this.press();\n        };\n        AbstractItem.prototype.disable = function () {\n            this.disabled = true;\n            var html = this.getHtml();\n            html.classList.add(ContextMenu.HtmlClasses['MENUDISABLED']);\n            html.setAttribute('aria-disabled', 'true');\n        };\n        AbstractItem.prototype.enable = function () {\n            this.disabled = false;\n            var html = this.getHtml();\n            html.classList.remove(ContextMenu.HtmlClasses['MENUDISABLED']);\n            html.removeAttribute('aria-disabled');\n        };\n        AbstractItem.prototype.executeCallbacks_ = function () {\n            var active = ContextMenu.MenuUtil.getActiveElement(this);\n            for (var _i = 0, _a = this.callbacks; _i < _a.length; _i++) {\n                var func = _a[_i];\n                try {\n                    func(this);\n                }\n                catch (e) {\n                    ContextMenu.MenuUtil.error(e, 'Callback for menu entry ' + this.getId() +\n                        ' failed.');\n                }\n            }\n        };\n        return AbstractItem;\n    }(ContextMenu.AbstractEntry));\n    ContextMenu.AbstractItem = AbstractItem;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var AbstractVariableItem = (function (_super) {\n        __extends(AbstractVariableItem, _super);\n        function AbstractVariableItem() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        AbstractVariableItem.prototype.generateHtml = function () {\n            _super.prototype.generateHtml.call(this);\n            var html = this.getHtml();\n            if (!this.span) {\n                this.generateSpan();\n            }\n            html.appendChild(this.span);\n            this.update();\n        };\n        AbstractVariableItem.prototype.register = function () {\n            this.variable.register(this);\n        };\n        AbstractVariableItem.prototype.unregister = function () {\n            this.variable.unregister(this);\n        };\n        AbstractVariableItem.prototype.update = function () {\n            this.updateAria();\n            if (this.span) {\n                this.updateSpan();\n            }\n        };\n        return AbstractVariableItem;\n    }(ContextMenu.AbstractItem));\n    ContextMenu.AbstractVariableItem = AbstractVariableItem;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var CssStyles;\n    (function (CssStyles) {\n        function makeClass_(name) {\n            return '.' + (ContextMenu.HtmlClasses[name] || name);\n        }\n        var INFO_STYLES = {};\n        INFO_STYLES[makeClass_('INFOCLOSE')] = '{' +\n            '  top:.2em; right:.2em;' +\n            '}',\n            INFO_STYLES[makeClass_('INFOCONTENT')] = '{' +\n                '  overflow:auto; text-align:left; font-size:80%;' +\n                '  padding:.4em .6em; border:1px inset; margin:1em 0px;' +\n                '  max-height:20em; max-width:30em; background-color:#EEEEEE;' +\n                '  white-space:normal;' +\n                '}',\n            INFO_STYLES[makeClass_('INFO') + makeClass_('MOUSEPOST')] = '{' +\n                'outline:none;' +\n                '}',\n            INFO_STYLES[makeClass_('INFO')] = '{' +\n                '  position:fixed; left:50%; width:auto; text-align:center;' +\n                '  border:3px outset; padding:1em 2em; background-color:#DDDDDD;' +\n                '  color:black;' +\n                '  cursor:default; font-family:message-box; font-size:120%;' +\n                '  font-style:normal; text-indent:0; text-transform:none;' +\n                '  line-height:normal; letter-spacing:normal; word-spacing:normal;' +\n                '  word-wrap:normal; white-space:nowrap; float:none; z-index:201;' +\n                '  border-radius: 15px;                     /* Opera 10.5 and IE9 */' +\n                '  -webkit-border-radius:15px;               /* Safari and Chrome */' +\n                '  -moz-border-radius:15px;                  /* Firefox */' +\n                '  -khtml-border-radius:15px;                /* Konqueror */' +\n                '  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */' +\n                '  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */' +\n                '  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */' +\n                '  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */' +\n                '  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2,' +\n                ' OffY=2, Color=\"gray\", Positive=\"true\"); /* IE */' +\n                '}';\n        var MENU_STYLES = {};\n        MENU_STYLES[makeClass_('MENU')] = '{' +\n            '  position:absolute;' +\n            '  background-color:white;' +\n            '  color:black;' +\n            '  width:auto; padding:5px 0px;' +\n            '  border:1px solid #CCCCCC; margin:0; cursor:default;' +\n            '  font: menu; text-align:left; text-indent:0; text-transform:none;' +\n            '  line-height:normal; letter-spacing:normal; word-spacing:normal;' +\n            '  word-wrap:normal; white-space:nowrap; float:none; z-index:201;' +\n            '  border-radius: 5px;                     /* Opera 10.5 and IE9 */' +\n            '  -webkit-border-radius: 5px;             /* Safari and Chrome */' +\n            '  -moz-border-radius: 5px;                /* Firefox */' +\n            '  -khtml-border-radius: 5px;              /* Konqueror */' +\n            '  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */' +\n            '  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */' +\n            '  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */' +\n            '  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */' +\n            '}',\n            MENU_STYLES[makeClass_('MENUITEM')] = '{' +\n                '  padding: 1px 2em;' +\n                '  background:transparent;' +\n                '}',\n            MENU_STYLES[makeClass_('MENUARROW')] = '{' +\n                '  position:absolute; right:.5em; padding-top:.25em; color:#666666;' +\n                '  font-family: null; font-size: .75em' +\n                '}',\n            MENU_STYLES[makeClass_('MENUACTIVE') + ' ' + makeClass_('MENUARROW')] =\n                '{color:white}',\n            MENU_STYLES[makeClass_('MENUARROW') + makeClass_('RTL')] =\n                '{left:.5em; right:auto}',\n            MENU_STYLES[makeClass_('MENUCHECK')] = '{' +\n                '  position:absolute; left:.7em;' +\n                '  font-family: null' +\n                '}',\n            MENU_STYLES[makeClass_('MENUCHECK') + makeClass_('RTL')] =\n                '{ right:.7em; left:auto }',\n            MENU_STYLES[makeClass_('MENURADIOCHECK')] = '{' +\n                '  position:absolute; left: .7em;' +\n                '}',\n            MENU_STYLES[makeClass_('MENURADIOCHECK') + makeClass_('RTL')] = '{' +\n                '  right: .7em; left:auto' +\n                '}',\n            MENU_STYLES[makeClass_('MENUINPUTBOX')] = '{' +\n                '  padding-left: 1em; right:.5em; color:#666666;' +\n                '  font-family: null;' +\n                '}',\n            MENU_STYLES[makeClass_('MENUINPUTBOX') + makeClass_('RTL')] = '{' +\n                '  left: .1em;' +\n                '}',\n            MENU_STYLES[makeClass_('MENUCOMBOBOX')] = '{' +\n                '  left:.1em; padding-bottom:.5em;' +\n                '}',\n            MENU_STYLES[makeClass_('MENULABEL')] = '{' +\n                '  padding: 1px 2em 3px 1.33em;' +\n                '  font-style:italic' +\n                '}',\n            MENU_STYLES[makeClass_('MENURULE')] = '{' +\n                '  border-top: 1px solid #DDDDDD;' +\n                '  margin: 4px 3px;' +\n                '}',\n            MENU_STYLES[makeClass_('MENUDISABLED')] = '{' +\n                '  color:GrayText' +\n                '}',\n            MENU_STYLES[makeClass_('MENUACTIVE')] = '{' +\n                '  background-color: #606872;' +\n                '  color: white;' +\n                '}',\n            MENU_STYLES[makeClass_('MENUDISABLED') + ':focus'] = '{' +\n                '  background-color: #E8E8E8' +\n                '}',\n            MENU_STYLES[makeClass_('MENULABEL') + ':focus'] = '{' +\n                '  background-color: #E8E8E8' +\n                '}',\n            MENU_STYLES[makeClass_('CONTEXTMENU') + ':focus'] = '{' +\n                '  outline:none' +\n                '}',\n            MENU_STYLES[makeClass_('CONTEXTMENU') + ' ' +\n                makeClass_('MENUITEM') + ':focus'] = '{' +\n                '  outline:none' +\n                '}',\n            MENU_STYLES[makeClass_('MENU') + ' ' + makeClass_('MENUCLOSE')] = '{' +\n                '  top:-10px; left:-10px' +\n                '}';\n        var CLOSE_ICON_STYLES = {};\n        CLOSE_ICON_STYLES[makeClass_('MENUCLOSE')] = '{' +\n            '  position:absolute;' +\n            '  cursor:pointer;' +\n            '  display:inline-block;' +\n            '  border:2px solid #AAA;' +\n            '  border-radius:18px;' +\n            '  -webkit-border-radius: 18px;             /* Safari and Chrome */' +\n            '  -moz-border-radius: 18px;                /* Firefox */' +\n            '  -khtml-border-radius: 18px;              /* Konqueror */' +\n            '  font-family: \"Courier New\", Courier;' +\n            '  font-size:24px;' +\n            '  color:#F0F0F0' +\n            '}',\n            CLOSE_ICON_STYLES[makeClass_('MENUCLOSE') + ' span'] = '{' +\n                '  display:block; background-color:#AAA; border:1.5px solid;' +\n                '  border-radius:18px;' +\n                '  -webkit-border-radius: 18px;             /* Safari and Chrome */' +\n                '  -moz-border-radius: 18px;                /* Firefox */' +\n                '  -khtml-border-radius: 18px;              /* Konqueror */' +\n                '  line-height:0;' +\n                '  padding:8px 0 6px     /* may need to be browser-specific */' +\n                '}',\n            CLOSE_ICON_STYLES[makeClass_('MENUCLOSE') + ':hover'] = '{' +\n                '  color:white!important;' +\n                '  border:2px solid #CCC!important' +\n                '}',\n            CLOSE_ICON_STYLES[makeClass_('MENUCLOSE') + ':hover span'] = '{' +\n                '  background-color:#CCC!important' +\n                '}',\n            CLOSE_ICON_STYLES[makeClass_('MENUCLOSE') + ':hover:focus'] = '{' +\n                '  outline:none' +\n                '}';\n        var INFO_ADDED = false;\n        var MENU_ADDED = false;\n        var CLOSE_ICON_ADDED = false;\n        function addMenuStyles(opt_document) {\n            if (MENU_ADDED) {\n                return;\n            }\n            addStyles_(MENU_STYLES, opt_document);\n            MENU_ADDED = true;\n            addCloseIconStyles_(opt_document);\n        }\n        CssStyles.addMenuStyles = addMenuStyles;\n        function addInfoStyles(opt_document) {\n            if (INFO_ADDED) {\n                return;\n            }\n            addStyles_(INFO_STYLES, opt_document);\n            INFO_ADDED = true;\n            addCloseIconStyles_(opt_document);\n        }\n        CssStyles.addInfoStyles = addInfoStyles;\n        function addCloseIconStyles_(opt_document) {\n            if (CLOSE_ICON_ADDED) {\n                return;\n            }\n            addStyles_(CLOSE_ICON_STYLES, opt_document);\n            CLOSE_ICON_ADDED = true;\n        }\n        function addStyles_(styles, opt_document) {\n            var doc = opt_document || document;\n            var element = doc.createElement('style');\n            element.type = 'text/css';\n            var inner = '';\n            for (var style in styles) {\n                inner += style;\n                inner += ' ';\n                inner += styles[style];\n                inner += '\\n';\n            }\n            element.innerHTML = inner;\n            doc.head.appendChild(element);\n        }\n    })(CssStyles = ContextMenu.CssStyles || (ContextMenu.CssStyles = {}));\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var CloseButton = (function (_super) {\n        __extends(CloseButton, _super);\n        function CloseButton(element) {\n            var _this = _super.call(this) || this;\n            _this.className = ContextMenu.HtmlClasses['MENUCLOSE'];\n            _this.role = 'button';\n            _this.element = element;\n            return _this;\n        }\n        CloseButton.prototype.generateHtml = function () {\n            var html = document.createElement('span');\n            html.classList.add(this.className);\n            html.setAttribute('role', this.role);\n            html.setAttribute('tabindex', '0');\n            var content = document.createElement('span');\n            content.textContent = '\\u00D7';\n            html.appendChild(content);\n            this.setHtml(html);\n        };\n        CloseButton.prototype.display = function () { };\n        CloseButton.prototype.unpost = function () {\n            _super.prototype.unpost.call(this);\n            this.element.unpost();\n        };\n        CloseButton.prototype.keydown = function (event) {\n            this.bubbleKey();\n            _super.prototype.keydown.call(this, event);\n        };\n        CloseButton.prototype.space = function (event) {\n            this.unpost();\n            this.stop(event);\n        };\n        CloseButton.prototype.mousedown = function (event) {\n            this.unpost();\n            this.stop(event);\n        };\n        return CloseButton;\n    }(ContextMenu.AbstractPostable));\n    ContextMenu.CloseButton = CloseButton;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Info = (function (_super) {\n        __extends(Info, _super);\n        function Info(title, content, signature) {\n            var _this = _super.call(this) || this;\n            _this.className = ContextMenu.HtmlClasses['INFO'];\n            _this.role = 'dialog';\n            _this.title = '';\n            _this.signature = '';\n            _this.contentDiv = _this.generateContent();\n            _this.close = _this.generateClose();\n            _this.title = title;\n            _this.content = content || function () { return ''; };\n            _this.signature = signature;\n            return _this;\n        }\n        Info.prototype.attachMenu = function (menu) {\n            this.menu = menu;\n        };\n        Info.prototype.getHtml = function () {\n            var html = _super.prototype.getHtml.call(this);\n            return html;\n        };\n        Info.prototype.generateHtml = function () {\n            _super.prototype.generateHtml.call(this);\n            var html = this.getHtml();\n            html.appendChild(this.generateTitle());\n            html.appendChild(this.contentDiv);\n            html.appendChild(this.generateSignature());\n            html.appendChild(this.close.getHtml());\n            html.setAttribute('tabindex', '0');\n        };\n        Info.prototype.post = function () {\n            _super.prototype.post.call(this);\n            var doc = document.documentElement;\n            var html = this.getHtml();\n            var H = window.innerHeight || doc.clientHeight || doc.scrollHeight || 0;\n            var x = Math.floor((-html.offsetWidth) / 2);\n            var y = Math.floor((H - html.offsetHeight) / 3);\n            html.setAttribute('style', 'margin-left: ' + x + 'px; top: ' + y + 'px;');\n            if (window.event instanceof MouseEvent) {\n                html.classList.add(ContextMenu.HtmlClasses['MOUSEPOST']);\n            }\n            html.focus();\n        };\n        Info.prototype.display = function () {\n            this.menu.registerWidget(this);\n            this.contentDiv.innerHTML = this.content();\n            var html = this.menu.getHtml();\n            html.parentNode.removeChild(html);\n            this.menu.getFrame().appendChild(this.getHtml());\n        };\n        Info.prototype.click = function (event) { };\n        Info.prototype.keydown = function (event) {\n            this.bubbleKey();\n            _super.prototype.keydown.call(this, event);\n        };\n        Info.prototype.escape = function (event) {\n            this.unpost();\n        };\n        Info.prototype.unpost = function () {\n            _super.prototype.unpost.call(this);\n            this.getHtml().classList.remove(ContextMenu.HtmlClasses['MOUSEPOST']);\n            this.menu.unregisterWidget(this);\n        };\n        Info.prototype.generateClose = function () {\n            var close = new ContextMenu.CloseButton(this);\n            var html = close.getHtml();\n            html.classList.add(ContextMenu.HtmlClasses['INFOCLOSE']);\n            html.setAttribute('aria-label', 'Close Dialog Box');\n            return close;\n        };\n        Info.prototype.generateTitle = function () {\n            var span = document.createElement('span');\n            span.innerHTML = this.title;\n            span.classList.add(ContextMenu.HtmlClasses['INFOTITLE']);\n            return span;\n        };\n        Info.prototype.generateContent = function () {\n            var div = document.createElement('div');\n            div.classList.add(ContextMenu.HtmlClasses['INFOCONTENT']);\n            div.setAttribute('tabindex', '0');\n            return div;\n        };\n        Info.prototype.generateSignature = function () {\n            var span = document.createElement('span');\n            span.innerHTML = this.signature;\n            span.classList.add(ContextMenu.HtmlClasses['INFOSIGNATURE']);\n            return span;\n        };\n        return Info;\n    }(ContextMenu.AbstractPostable));\n    ContextMenu.Info = Info;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Checkbox = (function (_super) {\n        __extends(Checkbox, _super);\n        function Checkbox(menu, content, variable, id) {\n            var _this = _super.call(this, menu, 'checkbox', content, id) || this;\n            _this.role = 'menuitemcheckbox';\n            _this.variable = menu.getPool().lookup(variable);\n            _this.register();\n            return _this;\n        }\n        Checkbox.parse = function (_a, menu) {\n            var content = _a.content, variable = _a.variable, id = _a.id;\n            return new Checkbox(menu, content, variable, id);\n        };\n        Checkbox.prototype.executeAction = function () {\n            this.variable.setValue(!this.variable.getValue());\n            ContextMenu.MenuUtil.close(this);\n        };\n        Checkbox.prototype.generateSpan = function () {\n            this.span = document.createElement('span');\n            this.span.textContent = '\\u2713';\n            this.span.classList.add(ContextMenu.HtmlClasses['MENUCHECK']);\n        };\n        Checkbox.prototype.updateAria = function () {\n            this.getHtml().setAttribute('aria-checked', this.variable.getValue() ? 'true' : 'false');\n        };\n        Checkbox.prototype.updateSpan = function () {\n            this.span.style.display = this.variable.getValue() ? '' : 'none';\n        };\n        return Checkbox;\n    }(ContextMenu.AbstractVariableItem));\n    ContextMenu.Checkbox = Checkbox;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Combo = (function (_super) {\n        __extends(Combo, _super);\n        function Combo(menu, content, variable, id) {\n            var _this = _super.call(this, menu, 'radio', content, id) || this;\n            _this.role = 'combobox';\n            _this.inputEvent = false;\n            _this.variable = menu.getPool().lookup(variable);\n            _this.register();\n            return _this;\n        }\n        Combo.parse = function (_a, menu) {\n            var content = _a.content, variable = _a.variable, id = _a.id;\n            return new Combo(menu, content, variable, id);\n        };\n        Combo.prototype.executeAction = function () {\n            this.variable.setValue(this.input.value, ContextMenu.MenuUtil.getActiveElement(this));\n        };\n        Combo.prototype.space = function (event) {\n            _super.prototype.space.call(this, event);\n            this.down(null);\n        };\n        Combo.prototype.focus = function () {\n            _super.prototype.focus.call(this);\n            this.input.focus();\n        };\n        Combo.prototype.generateHtml = function () {\n            _super.prototype.generateHtml.call(this);\n            var html = this.getHtml();\n            html.classList.add(ContextMenu.HtmlClasses['MENUCOMBOBOX']);\n        };\n        Combo.prototype.generateSpan = function () {\n            this.span = document.createElement('span');\n            this.span.classList.add(ContextMenu.HtmlClasses['MENUINPUTBOX']);\n            this.input = document.createElement('input');\n            this.input.addEventListener('keydown', this.inputKey.bind(this));\n            this.input.setAttribute('size', '10em');\n            this.input.setAttribute('type', 'text');\n            this.input.setAttribute('tabindex', '-1');\n            this.span.appendChild(this.input);\n        };\n        Combo.prototype.inputKey = function (event) {\n            this.bubbleKey();\n            this.inputEvent = true;\n        };\n        Combo.prototype.keydown = function (event) {\n            if (this.inputEvent &&\n                event.keyCode !== ContextMenu.KEY.ESCAPE &&\n                event.keyCode !== ContextMenu.KEY.RETURN) {\n                this.inputEvent = false;\n                event.stopPropagation();\n                return;\n            }\n            _super.prototype.keydown.call(this, event);\n            event.stopPropagation();\n        };\n        Combo.prototype.updateAria = function () { };\n        Combo.prototype.updateSpan = function () {\n            var initValue;\n            try {\n                initValue = this.variable.getValue(ContextMenu.MenuUtil.getActiveElement(this));\n            }\n            catch (e) {\n                initValue = '';\n            }\n            this.input.value = initValue;\n        };\n        return Combo;\n    }(ContextMenu.AbstractVariableItem));\n    ContextMenu.Combo = Combo;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Command = (function (_super) {\n        __extends(Command, _super);\n        function Command(menu, content, command, id) {\n            var _this = _super.call(this, menu, 'command', content, id) || this;\n            _this.command = null;\n            _this.command = command;\n            return _this;\n        }\n        Command.parse = function (_a, menu) {\n            var content = _a.content, action = _a.action, id = _a.id;\n            return new Command(menu, content, action, id);\n        };\n        Command.prototype.executeAction = function () {\n            try {\n                this.command(ContextMenu.MenuUtil.getActiveElement(this));\n            }\n            catch (e) {\n                ContextMenu.MenuUtil.error(e, 'Illegal command callback.');\n            }\n            ContextMenu.MenuUtil.close(this);\n        };\n        return Command;\n    }(ContextMenu.AbstractItem));\n    ContextMenu.Command = Command;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Label = (function (_super) {\n        __extends(Label, _super);\n        function Label(menu, content, id) {\n            return _super.call(this, menu, 'label', content, id) || this;\n        }\n        Label.parse = function (_a, menu) {\n            var content = _a.content, id = _a.id;\n            return new Label(menu, content, id);\n        };\n        Label.prototype.generateHtml = function () {\n            _super.prototype.generateHtml.call(this);\n            var html = this.getHtml();\n            html.classList.add(ContextMenu.HtmlClasses['MENULABEL']);\n        };\n        return Label;\n    }(ContextMenu.AbstractItem));\n    ContextMenu.Label = Label;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Radio = (function (_super) {\n        __extends(Radio, _super);\n        function Radio(menu, content, variable, id) {\n            var _this = _super.call(this, menu, 'radio', content, id) || this;\n            _this.role = 'menuitemradio';\n            _this.variable = menu.getPool().lookup(variable);\n            _this.register();\n            return _this;\n        }\n        Radio.parse = function (_a, menu) {\n            var content = _a.content, variable = _a.variable, id = _a.id;\n            return new Radio(menu, content, variable, id);\n        };\n        Radio.prototype.executeAction = function () {\n            this.variable.setValue(this.getId());\n            ContextMenu.MenuUtil.close(this);\n        };\n        Radio.prototype.generateSpan = function () {\n            this.span = document.createElement('span');\n            this.span.textContent = '\\u2713';\n            this.span.classList.add(ContextMenu.HtmlClasses['MENURADIOCHECK']);\n        };\n        Radio.prototype.updateAria = function () {\n            this.getHtml().setAttribute('aria-checked', this.variable.getValue() === this.getId() ? 'true' : 'false');\n        };\n        Radio.prototype.updateSpan = function () {\n            this.span.style.display =\n                this.variable.getValue() === this.getId() ? '' : 'none';\n        };\n        return Radio;\n    }(ContextMenu.AbstractVariableItem));\n    ContextMenu.Radio = Radio;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Rule = (function (_super) {\n        __extends(Rule, _super);\n        function Rule(menu) {\n            var _this = _super.call(this, menu, 'rule') || this;\n            _this.className = ContextMenu.HtmlClasses['MENUITEM'];\n            _this.role = 'separator';\n            return _this;\n        }\n        Rule.parse = function (_a, menu) {\n            return new Rule(menu);\n        };\n        Rule.prototype.generateHtml = function () {\n            _super.prototype.generateHtml.call(this);\n            var html = this.getHtml();\n            html.classList.add(ContextMenu.HtmlClasses['MENURULE']);\n            html.setAttribute('aria-orientation', 'vertical');\n        };\n        Rule.prototype.addEvents = function (element) { };\n        return Rule;\n    }(ContextMenu.AbstractEntry));\n    ContextMenu.Rule = Rule;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Submenu = (function (_super) {\n        __extends(Submenu, _super);\n        function Submenu(menu, content, id) {\n            var _this = _super.call(this, menu, 'submenu', content, id) || this;\n            _this.submenu = null;\n            return _this;\n        }\n        Submenu.parse = function (_a, menu) {\n            var content = _a.content, submenu = _a.menu, id = _a.id;\n            var item = new Submenu(menu, content, id);\n            item.setSubmenu(ContextMenu.SubMenu.parse(submenu, item));\n            return item;\n        };\n        Submenu.prototype.setSubmenu = function (menu) {\n            this.submenu = menu;\n        };\n        Submenu.prototype.getSubmenu = function () {\n            return this.submenu;\n        };\n        Submenu.prototype.mouseover = function (event) {\n            this.focus();\n            this.stop(event);\n        };\n        Submenu.prototype.mouseout = function (event) {\n            this.stop(event);\n        };\n        Submenu.prototype.unfocus = function () {\n            if (!this.submenu.isPosted()) {\n                _super.prototype.unfocus.call(this);\n                return;\n            }\n            if (this.getMenu().getFocused() !== this) {\n                _super.prototype.unfocus.call(this);\n                this.getMenu().unpostSubmenus();\n                return;\n            }\n            this.getHtml().setAttribute('tabindex', '-1');\n            this.getHtml().blur();\n        };\n        Submenu.prototype.focus = function () {\n            _super.prototype.focus.call(this);\n            if (!this.submenu.isPosted() && !this.disabled) {\n                this.submenu.post();\n            }\n        };\n        Submenu.prototype.executeAction = function () {\n            this.submenu.isPosted() ? this.submenu.unpost() : this.submenu.post();\n        };\n        Submenu.prototype.generateHtml = function () {\n            _super.prototype.generateHtml.call(this);\n            var html = this.getHtml();\n            this.span = document.createElement('span');\n            this.span.textContent = '\\u25BA';\n            this.span.classList.add(ContextMenu.HtmlClasses['MENUARROW']);\n            html.appendChild(this.span);\n            html.setAttribute('aria-haspopup', 'true');\n        };\n        Submenu.prototype.left = function (event) {\n            if (this.getSubmenu().isPosted()) {\n                this.getSubmenu().unpost();\n            }\n            else {\n                _super.prototype.left.call(this, event);\n            }\n        };\n        Submenu.prototype.right = function (event) {\n            if (!this.getSubmenu().isPosted()) {\n                this.getSubmenu().post();\n            }\n            else {\n                this.getSubmenu().down(event);\n            }\n        };\n        return Submenu;\n    }(ContextMenu.AbstractItem));\n    ContextMenu.Submenu = Submenu;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    var Popup = (function (_super) {\n        __extends(Popup, _super);\n        function Popup(title, content) {\n            var _this = _super.call(this) || this;\n            _this.title = '';\n            _this.window = null;\n            _this.localSettings = {\n                left: Math.round((screen.width - 400) / 2),\n                top: Math.round((screen.height - 300) / 3)\n            };\n            _this.windowList = [];\n            _this.mobileFlag = false;\n            _this.active = null;\n            _this.title = title;\n            _this.content = content || function () { return ''; };\n            return _this;\n        }\n        Popup.prototype.attachMenu = function (menu) {\n            this.menu = menu;\n        };\n        Popup.prototype.post = function () {\n            this.display();\n        };\n        Popup.prototype.display = function () {\n            this.active = this.menu.getStore().getActive();\n            var settings = [];\n            for (var setting in Popup.popupSettings) {\n                settings.push(setting + '=' + Popup.popupSettings[setting]);\n            }\n            for (var setting in this.localSettings) {\n                settings.push(setting + '=' + this.localSettings[setting]);\n            }\n            this.window = window.open('', '_blank', settings.join(','));\n            this.windowList.push(this.window);\n            var doc = this.window.document;\n            if (this.mobileFlag) {\n                doc.open();\n                doc.write('<html><head><meta name=\"viewport\" ' +\n                    'content=\"width=device-width, initial-scale=1.0\" /><title>' +\n                    this.title +\n                    '</title></head><body style=\"font-size:85%\">');\n                doc.write('<pre>' + this.generateContent() + '</pre>');\n                doc.write('<hr><input type=\"button\" value=\"' +\n                    'Close' + '\" onclick=\"window.close()\" />');\n                doc.write('</body></html>');\n                doc.close();\n            }\n            else {\n                doc.open();\n                doc.write('<html><head><title>' + this.title +\n                    '</title></head><body style=\"font-size:85%\">');\n                doc.write('<table><tr><td><pre>' + this.generateContent() +\n                    '</pre></td></tr></table>');\n                doc.write('</body></html>');\n                doc.close();\n                setTimeout(this.resize.bind(this), 50);\n            }\n        };\n        Popup.prototype.unpost = function () {\n            this.windowList.forEach(function (x) { return x.close(); });\n            this.window = null;\n        };\n        Popup.prototype.generateContent = function () {\n            return this.content(this.active);\n        };\n        Popup.prototype.resize = function () {\n            var table = this.window.document.body.firstChild;\n            var H = (this.window.outerHeight - this.window.innerHeight) || 30;\n            var W = (this.window.outerWidth - this.window.innerWidth) || 30;\n            W = Math.max(140, Math.min(Math.floor(.5 * this.window.screen.width), table.offsetWidth + W + 25));\n            H = Math.max(40, Math.min(Math.floor(.5 * this.window.screen.height), table.offsetHeight + H + 25));\n            this.window.resizeTo(W, H);\n            var bb = this.active.getBoundingClientRect();\n            if (bb) {\n                var x = Math.max(0, Math.min(bb.right - Math.floor(W / 2), this.window.screen.width - W - 20));\n                var y = Math.max(0, Math.min(bb.bottom - Math.floor(H / 2), this.window.screen.height - H - 20));\n                this.window.moveTo(x, y);\n            }\n            this.active = null;\n        };\n        Popup.popupSettings = {\n            status: 'no',\n            toolbar: 'no',\n            locationbar: 'no',\n            menubar: 'no',\n            directories: 'no',\n            personalbar: 'no',\n            resizable: 'yes',\n            scrollbars: 'yes',\n            width: 400,\n            height: 300,\n        };\n        return Popup;\n    }(ContextMenu.AbstractPostable));\n    ContextMenu.Popup = Popup;\n})(ContextMenu || (ContextMenu = {}));\nvar ContextMenu;\n(function (ContextMenu) {\n    ContextMenu.TOUCH = {\n        START: 'touchstart',\n        MOVE: 'touchmove',\n        END: 'touchend',\n        CANCEL: 'touchcancel'\n    };\n})(ContextMenu || (ContextMenu = {}));\n","\"use strict\";\nObject.defineProperty(exports, '__esModule', {value: true});\nexports.DATAMJX = MathJax._.core.MmlTree.SerializedMmlVisitor.DATAMJX;\nexports.SerializedMmlVisitor = MathJax._.core.MmlTree.SerializedMmlVisitor.SerializedMmlVisitor;\n","import {combineWithMathJax} from '../../../../../js/components/global.js';\n\nimport * as module1 from '../../../../../js/ui/menu/MJContextMenu.js';\nimport * as module2 from '../../../../../js/ui/menu/Menu.js';\nimport * as module3 from '../../../../../js/ui/menu/MenuHandler.js';\nimport * as module4 from '../../../../../js/ui/menu/MmlVisitor.js';\nimport * as module5 from '../../../../../js/ui/menu/SelectableInfo.js';\n\ncombineWithMathJax({_: {\n    ui: {\n        menu: {\n            MJContextMenu: module1,\n            Menu: module2,\n            MenuHandler: module3,\n            MmlVisitor: module4,\n            SelectableInfo: module5\n        }\n    }\n}});\n","import './context-menu.js';\nimport './lib/menu.js';\n\nimport {MenuHandler} from '../../../../js/ui/menu/MenuHandler.js';\n\nif (MathJax.startup && typeof window !== 'undefined') {\n    MathJax.startup.extendHandler(handler => MenuHandler(handler), 20);\n}\n\n"],"sourceRoot":""}